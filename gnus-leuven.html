<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Gnus Leuven Config</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="Fabrice Niessen" />
<meta name="keywords" content="emacs, gnus, dotfile, config" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="http://www.pirilampo.org/styles/bigblow/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="http://www.pirilampo.org/styles/bigblow/css/bigblow.css"/>
<link rel="stylesheet" type="text/css" href="http://www.pirilampo.org/styles/bigblow/css/hideshow.css"/>
<script type="text/javascript" src="http://www.pirilampo.org/styles/bigblow/js/jquery-1.11.0.min.js"></script>
<script type="text/javascript" src="http://www.pirilampo.org/styles/bigblow/js/jquery-ui-1.10.2.min.js"></script>
<script type="text/javascript" src="http://www.pirilampo.org/styles/bigblow/js/jquery.localscroll-min.js"></script>
<script type="text/javascript" src="http://www.pirilampo.org/styles/bigblow/js/jquery.scrollTo-1.4.3.1-min.js"></script>
<script type="text/javascript" src="http://www.pirilampo.org/styles/bigblow/js/jquery.zclip.min.js"></script>
<script type="text/javascript" src="http://www.pirilampo.org/styles/bigblow/js/bigblow.js"></script>
<script type="text/javascript" src="http://www.pirilampo.org/styles/bigblow/js/hideshow.js"></script>
</head>
<body>
<div id="content">
<h1 class="title">Gnus Leuven Config</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org429da0a">Overview</a></li>
<li><a href="#orgac81d1f">Header</a></li>
<li><a href="#org23571af">Loading Libraries of Lisp Code for Emacs</a></li>
<li><a href="#org0adbf6d">Starting Up Gnus</a>
<ul>
<li><a href="#orgcd25cea">Finding the News</a></li>
<li><a href="#org69b1b91">New Groups</a></li>
<li><a href="#org89c0f79">Startup Files</a></li>
<li><a href="#orga9e3387">Auto Save</a></li>
<li><a href="#org38cdb75">Active File</a></li>
</ul>
</li>
<li><a href="#org67cd28d">Group Buffer</a>
<ul>
<li><a href="#orgdef3162">Group Buffer Format</a></li>
<li><a href="#org54b1754">Selecting a Group</a></li>
<li><a href="#org87f69cb">Exiting Gnus</a></li>
<li><a href="#org48a4be6">Group Topics</a></li>
<li><a href="#org7c94bd4">Misc Group Stuff</a></li>
</ul>
</li>
<li><a href="#org581424f">Summary buffer</a>
<ul>
<li><a href="#org52bf35d">Summary Buffer Format</a></li>
<li><a href="#orgbda0e4c">Reply, Followup and Post</a></li>
<li><a href="#org5c54d41">Marking Articles</a>
<ul>
<li><a href="#orged9594d">Unread Articles</a></li>
<li><a href="#orgcd324db">Read Articles</a></li>
<li><a href="#org88c7755">Other marks</a></li>
<li><a href="#orgcb946a7">Score Variables</a></li>
</ul>
</li>
<li><a href="#org4570681">Threading</a></li>
<li><a href="#orge1b0b16">Sorting the Summary Buffer</a></li>
<li><a href="#orge89e569">Article Treatment</a></li>
<li><a href="#orgfab4377">MIME Commands</a></li>
<li><a href="#org3dfcebc">Charsets</a></li>
<li><a href="#org109df8c">Various Summary Stuff</a>
<ul>
<li><a href="#orgc15fe7b">Gnus Stripes</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org24631b5">Article Buffer</a>
<ul>
<li><a href="#org1b0346b">Hiding headers</a></li>
</ul>
</li>
<li><a href="#orga45d97c">Emacs MIME</a>
<ul>
<li><a href="#orgbc3eade">Decoding and Viewing</a></li>
<li><a href="#orgd3bacdc">Non-MIME</a></li>
<li><a href="#org170ccb9">Display Customization</a></li>
<li><a href="#orgb0d009b">Basic Functions</a></li>
</ul>
</li>
<li><a href="#orgc0f4e9a">Back to Article Buffer</a></li>
<li><a href="#orgcf62db3">Composing Messages</a>
<ul>
<li><a href="#org4e82021">Mail</a></li>
<li><a href="#orge1f1267">Posting Server</a></li>
<li><a href="#orgd82dd75">Archived Messages</a></li>
<li><a href="#orgd3764ce">Posting Styles</a>
<ul>
<li><a href="#org339fc02">Multiple servers</a></li>
<li><a href="#orgeb70bf0">Headers</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orgd4d3283">Message</a>
<ul>
<li><a href="#orgaf0b7e0">Interface</a></li>
<li><a href="#orgd2032cb">Commands</a></li>
<li><a href="#org0f31a93">Variables</a></li>
</ul>
</li>
<li><a href="#org63487a8">Select Methods</a>
<ul>
<li><a href="#org47eec93">Getting News</a></li>
<li><a href="#orgb50cdfe">Using IMAP</a>
<ul>
<li><a href="#org039a5df">Customizing the IMAP Connection</a></li>
</ul>
</li>
<li><a href="#org21ce1fb">Getting Mail</a>
<ul>
<li><a href="#orgf646a6e">Splitting Mail</a></li>
<li><a href="#org115a0ad">Fancy Mail Splitting</a></li>
</ul>
</li>
<li><a href="#org943422f">Browsing the Web</a></li>
<li><a href="#org32bd7f0">Gnus Unplugged</a></li>
</ul>
</li>
<li><a href="#org6d307ab">Scoring</a>
<ul>
<li><a href="#org06b401d">From Sacha Chua</a></li>
</ul>
</li>
<li><a href="#orgf2e1b8f">Searching</a></li>
<li><a href="#orgedf428c">Various</a>
<ul>
<li><a href="#orgbe08f47">Interactive</a></li>
<li><a href="#orgac9ad21">Formatting Variables</a></li>
<li><a href="#org953cdcb">Window Layout</a></li>
<li><a href="#org0a90063">The Gnus Registry</a></li>
<li><a href="#orgfe36e99">Interaction with other modes</a></li>
<li><a href="#orgd373c5f">Various Various</a></li>
<li><a href="#org218a0ea">Missing packages</a></li>
</ul>
</li>
<li><a href="#orgb6d2f78">File Local Variables</a>
<ul>
<li><a href="#org278c0c6">Feature</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-org429da0a" class="outline-2">
<h2 id="org429da0a">Overview</h2>
<div class="outline-text-2" id="text-org429da0a">
<p>
See <a href="http://www.gnu.org/software/emacs/manual/gnus.html">http://www.gnu.org/software/emacs/manual/gnus.html</a>
</p>

<p>
This covers the basics of Gnus:
<a href="http://koldfront.dk/text/gnus-email-basic-usage.html">http://koldfront.dk/text/gnus-email-basic-usage.html</a>
</p>
</div>
</div>

<div id="outline-container-orgac81d1f" class="outline-2">
<h2 id="orgac81d1f">Header</h2>
<div class="outline-text-2" id="text-orgac81d1f">
<div class="org-src-container">
<pre class="src src-emacs-lisp" id="org6582bf2">(format-time-string <span class="org-string">"%Y%m%d.%H%M"</span>)
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;;; </span><span class="org-comment">gnus-leuven.el --- my Gnus config file</span>

<span class="org-comment-delimiter">;; </span><span class="org-comment">Copyright (C) 2004-2019 Fabrice Niessen</span>

<span class="org-comment-delimiter">;; </span><span class="org-comment">Author: Fabrice Niessen &lt;(concat "fniessen" at-sign "pirilampo.org")&gt;</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">URL: https://github.com/fniessen/emacs-leuven-theme</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">Version: 20191030.2002</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">Keywords: emacs, gnus, dotfile, config</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;;</span>
<span class="org-comment-delimiter">;;    </span><span class="org-comment">__ _ _ __  _   _ ___</span>
<span class="org-comment-delimiter">;;   </span><span class="org-comment">/ _` | '_ \| | | / __|</span>
<span class="org-comment-delimiter">;;  </span><span class="org-comment">| (_| | | | | |_| \__ \</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">(_)__, |_| |_|\__,_|___/</span>
<span class="org-comment-delimiter">;;   </span><span class="org-comment">|___/</span>

<span class="org-comment-delimiter">;; </span><span class="org-comment">This file is NOT part of GNU Emacs.</span>

<span class="org-comment-delimiter">;; </span><span class="org-comment">This program is free software: you can redistribute it and/or</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">modify it under the terms of the GNU General Public License as</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">published by the Free Software Foundation, either version 3 of</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">the License, or (at your option) any later version.</span>
<span class="org-comment-delimiter">;;</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">This program is distributed in the hope that it will be useful,</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">GNU General Public License for more details.</span>
<span class="org-comment-delimiter">;;</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">You should have received a copy of the GNU General Public License</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">along with this program. If not, see <a href="http://www.gnu.org/licenses/">&lt;http://www.gnu.org/licenses/&gt;</a>.</span>

<span class="org-comment-delimiter">;;; </span><span class="org-comment">Commentary:</span>

<span class="org-comment-delimiter">;;</span><span class="org-comment">** Help</span>
<span class="org-comment-delimiter">;;</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">For help on The Gnus Newsreader, see:</span>
<span class="org-comment-delimiter">;;     </span><span class="org-comment">(info "(gnus)")  &lt;== C-x C-e here!</span>
<span class="org-comment-delimiter">;;</span>
<span class="org-comment-delimiter">;;</span><span class="org-comment">** BUG</span>
<span class="org-comment-delimiter">;;</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">Updating info for nnimap does not occurr for group INBOX (well for</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">subgroups) - i.e., mail GCc'ed to INBOX is lost...</span>

<span class="org-comment-delimiter">;; </span><span class="org-comment">http://www.emacswiki.org/emacs/GnusTutorial</span>

<span class="org-comment-delimiter">;; </span><span class="org-comment">Disconnected from IMAP? In the `</span><span class="org-comment"><span class="org-constant">*Server*</span></span><span class="org-comment">' buffer, hit 'C' to close the</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">server and then 'O' to reopen it.</span>

<span class="org-comment-delimiter">;; </span><span class="org-comment">"You should byte-compile Gnus" because the function `</span><span class="org-comment"><span class="org-constant">gnus</span></span><span class="org-comment">' isn't</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">byte-compiled. Check `M-x locate-library RET gnus RET' if it picks up the</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">.el or .elc file.</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;;; </span><span class="org-comment">Code:</span>

<span class="org-comment-delimiter">;; </span><span class="org-comment">This file is only provided as an example. Customize it to your own taste!</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(message <span class="org-string">"* Load Gnus Leuven"</span>)

<span class="org-comment-delimiter">;;</span><span class="org-comment">* Loading</span>

(<span class="org-keyword">require</span> '<span class="org-constant">gnus</span>)

<span class="org-comment-delimiter">;; </span><span class="org-comment">List of packages that `</span><span class="org-comment"><span class="org-constant">try-require</span></span><span class="org-comment">' can't find.</span>
(<span class="org-keyword">setq</span> leuven--missing-packages nil)
</pre>
</div>
</div>
</div>

<div id="outline-container-org23571af" class="outline-2">
<h2 id="org23571af">Loading Libraries of Lisp Code for Emacs</h2>
<div class="outline-text-2" id="text-org23571af">
<p>
It is useful to define <code>try-require</code> here, so that this Gnus configuration can be
used without its Emacs configuration counterpart (then, it&rsquo;s not already
defined).
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">  <span class="org-comment-delimiter">;; </span><span class="org-comment">Require a feature/library if available; if not, fail silently.</span>
  (<span class="org-keyword">unless</span> (fboundp 'try-require)
    (<span class="org-keyword">defun</span> <span class="org-function-name">try-require</span> (feature)
      <span class="org-doc">"Attempt to load a FEATURE (or library).</span>
<span class="org-doc">    Return true if the library given as argument is successfully loaded.  If</span>
<span class="org-doc">    not, just print a message."</span>
      (<span class="org-keyword">condition-case</span> err
          (<span class="org-keyword">progn</span>
            (<span class="org-keyword">if</span> (stringp feature)
                (load-library feature)
              (<span class="org-keyword">require</span> <span class="org-constant">feature</span>))
            t)                          <span class="org-comment-delimiter">; </span><span class="org-comment">Necessary for correct behavior in</span>
                                        <span class="org-comment-delimiter">; </span><span class="org-comment">conditional expressions.</span>
        (file-error
         (message <span class="org-string">"Requiring `</span><span class="org-string"><span class="org-constant">%s</span></span><span class="org-string">'... missing"</span> feature)
         nil))))
</pre>
</div>
</div>
</div>

<div id="outline-container-org0adbf6d" class="outline-2">
<h2 id="org0adbf6d">Starting Up Gnus</h2>
<div class="outline-text-2" id="text-org0adbf6d">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span class="org-keyword">setq</span> gnus-directory <span class="org-string">"~/.gnus.d/"</span>)      <span class="org-comment-delimiter">; </span><span class="org-comment">XXX</span>
</pre>
</div>

<p>
If you&rsquo;re running a recent Emacs, look into the EPA library to encrypt your
<code>.authinfo</code> file.
</p>

<p>
See <a href="http://www.emacswiki.org/emacs/GnusEncryptedAuthInfo">http://www.emacswiki.org/emacs/GnusEncryptedAuthInfo</a>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;;</span><span class="org-comment">* 1 (info "(gnus)Starting Up") Gnus</span>

  (message <span class="org-string">"1 Starting Gnus..."</span>)

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Support for `</span><span class="org-comment"><span class="org-constant">.authinfo</span></span><span class="org-comment">' file.</span>
  (<span class="org-keyword">when</span> (try-require 'auth-source)

    <span class="org-comment-delimiter">;; </span><span class="org-comment">Log debug messages.</span>
    (<span class="org-keyword">setq</span> auth-source-debug t))
</pre>
</div>
</div>

<div id="outline-container-orgcd25cea" class="outline-3">
<h3 id="orgcd25cea">Finding the News</h3>
<div class="outline-text-3" id="text-orgcd25cea">
<p>
Download and <b>install</b> of <a href="http://www.gnu.org/software/gnutls/">GnuTLS library</a> may be required.
</p>

<div class="note">
<p>
If this is on Windows, check what <code>M-: (gnutls-available-p) RET</code> yield&#x2026;
</p>

</div>

<p>
Go to <a href="http://schwarzvogel.de/ssl_tls_testing.shtml">Testing SSL and TLS services</a> to test the <b>opening of TLS connections</b> with
<code>gnutls-cli</code>, the program used by default (see <code>starttls-gnutls-program</code>) when
GnuTLS is used (see <code>starttls-use-gnutls</code>).
</p>

<div class="note">
<p>
STARTTLS is an extension to plain text communication protocols to provide
encrypted communication over the Internet.
</p>

<p>
STARTTLS enables plain text unsecured SMTP connection to be upgraded to
a SSL/TLS encrypted session on the same port.
</p>

<p>
Modern POP3 servers support STARTTLS, and Emacs will upgrade to a TLS connection
whenever the server supports it.  (If you have an Emacs compiled with GnuTLS
support, but I would guess that almost all Emacs instances has that.)
</p>

<p>
Virtually all the Emacs network transports will upgrade to TLS
opportunistically, if the servers allow it, so Emacs should send no passwords
unencrypted.
</p>

<p>
The only exceptions are HTTP and IRC, unless the latter has been fixed lately.
And there are hopefully nobody who does a login that matters over HTTP.
</p>

</div>

<p>
Setting the following right is the only thing really required!  The rest is
customization.
</p>

<div class="note">
<p>
The following configuration, given as example (which works if your mail server
is accessible via the name <code>mail</code>), is wrapped in a test with my host name, so
that it does not interfere with your own configuration&#x2026;
</p>

</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;;</span><span class="org-comment">** 1.1 (info "(gnus)Finding the News")</span>

  (<span class="org-keyword">if</span> (member (downcase (system-name))
              '(<span class="org-string">"mundaneum"</span> <span class="org-string">"xiphias"</span> <span class="org-string">"osboxes"</span>)) <span class="org-comment-delimiter">; </span><span class="org-comment">Private config.</span>

      <span class="org-comment-delimiter">;; </span><span class="org-comment">Configure incoming mail.</span>
      (<span class="org-keyword">setq</span> gnus-select-method
            '(nnimap <span class="org-string">"work"</span>
                     (nnimap-address <span class="org-string">"ssl0.ovh.net"</span>)
                     (nnimap-server-port <span class="org-string">"imaps"</span>) <span class="org-comment-delimiter">; </span><span class="org-comment">993</span>
                     (nnimap-stream ssl)

                     <span class="org-comment-delimiter">;; </span><span class="org-comment">Necessary HERE for fancy splitting in Emacs 25.0!</span>
                     (nnimap-inbox <span class="org-string">"INBOX"</span>)
                     (nnimap-split-methods nnmail-split-fancy) <span class="org-comment-delimiter">; </span><span class="org-comment">NOT QUOTED!!!</span>
                                        <span class="org-comment-delimiter">; </span><span class="org-comment">XXX when (try-require 'bbdb-gnus)...</span>
                     ))

    (message <span class="org-string">"WARN- SMTP Server NOT configured!"</span>)
    <span class="org-comment-delimiter">;; </span><span class="org-comment">Sleep 1.5 s so that you can see the warning.</span>
    (sit-for 1.5)
    (<span class="org-keyword">setq</span> gnus-select-method '(nnnil <span class="org-string">""</span>)))
</pre>
</div>

<div class="note">
<p>
The account label allows for multiple accounts on the same server (see <code>.authinfo</code>
for logins).
</p>

</div>

<p>
See <a href="http://www.cataclysmicmutation.com/2010/11/multiple-gmail-accounts-in-gnus/">Multiple GMail Accounts in Gnus</a>.
</p>

<div class="warning">
<p>
When trying to access mail on a shared server, it&rsquo;s possible you have to use
a username such as <code>user@domain.com</code>. So, don&rsquo;t forget the <code>@domain.com</code> part, to
avoid &ldquo;Authentication failed&rdquo; messages!
</p>

</div>

<div class="note">
<p>
Mailbox names from the server specified in <code>gnus-select-method</code> are NOT prefixed
with <code>nnimap</code> (or such).  Nice!
</p>

</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">  <span class="org-comment-delimiter">;; </span><span class="org-comment">Using Gnus for news.</span>
  (<span class="org-keyword">setq</span> gnus-secondary-select-methods
        '((nntp <span class="org-string">"gmane"</span>
                (nntp-address <span class="org-string">"news.gmane.org"</span>))
          (nntp <span class="org-string">"eternal-september"</span>
                (nntp-address <span class="org-string">"news.eternal-september.org"</span>))))
</pre>
</div>

<div class="note">
<p>
When the above config (for NNTP servers) is left out, then no password is asked
to open the GPG file!
</p>

</div>
</div>
</div>

<div id="outline-container-org69b1b91" class="outline-3">
<h3 id="org69b1b91">New Groups</h3>
<div class="outline-text-3" id="text-org69b1b91">
<p>
Finding new newsgroups is done:
</p>
<ul class="org-ul">
<li>at startup (if <code>gnus-check-new-newsgroups</code> is non-nil) or</li>
<li>by using the function <code>gnus-find-new-newsgroup</code>.</li>
</ul>

<p>
You can always subscribe to the new groups just by pressing <code>U</code> in the group
buffer.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;;</span><span class="org-comment">** 1.4 (info "(gnus)New Groups")</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Gnus will not check for new newsgroups at startup.</span>
  (<span class="org-keyword">setq</span> gnus-check-new-newsgroups nil)  <span class="org-comment-delimiter">; </span><span class="org-comment">Save you some time at startup and when</span>
                                        <span class="org-comment-delimiter">; </span><span class="org-comment">you do the `g' command.</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Gnus will ask you to auto-subscribe on *all* new IMAP groups.</span>
  (<span class="org-keyword">setq</span> gnus-subscribe-newsgroup-method #'gnus-subscribe-interactively)

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Don't save the list of killed groups.</span>
  (<span class="org-keyword">setq</span> gnus-save-killed-list nil)      <span class="org-comment-delimiter">; </span><span class="org-comment">WARNING -- As Gnus has no record of</span>
                                        <span class="org-comment-delimiter">; </span><span class="org-comment">which groups are new and which are</span>
                                        <span class="org-comment-delimiter">; </span><span class="org-comment">old, the automatic new newsgroups</span>
                                        <span class="org-comment-delimiter">; </span><span class="org-comment">subscription methods becomes</span>
                                        <span class="org-comment-delimiter">; </span><span class="org-comment">meaningless.</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org89c0f79" class="outline-3">
<h3 id="org89c0f79">Startup Files</h3>
<div class="outline-text-3" id="text-org89c0f79">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;;</span><span class="org-comment">** 1.6 (info "(gnus)Startup Files")</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Don't save a `</span><span class="org-comment"><span class="org-constant">.newsrc</span></span><span class="org-comment">' file (for using other newsreaders) on exit.</span>
  (<span class="org-keyword">setq</span> gnus-save-newsrc-file nil)      <span class="org-comment-delimiter">; </span><span class="org-comment">Speed-up.</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Ignore the `</span><span class="org-comment"><span class="org-constant">.newsrc</span></span><span class="org-comment">' file.</span>
  (<span class="org-keyword">setq</span> gnus-read-newsrc-file nil)      <span class="org-comment-delimiter">; </span><span class="org-comment">Speed-up.</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">My `</span><span class="org-comment"><span class="org-constant">.newsrc</span></span><span class="org-comment">' file (and the derived .el/.eld files).</span>
  (<span class="org-keyword">setq</span> gnus-startup-file (concat gnus-directory <span class="org-string">".newsrc"</span>))
</pre>
</div>

<div class="tip">
<p>
To stop the repetitive (and growing) <code>nntp read</code> messages, you must <b>subscribe to
at least one foreign group from every NNTP server</b>.  You can even unsubscribe
directly afterward&#x2026;
</p>

</div>
</div>
</div>

<div id="outline-container-orga9e3387" class="outline-3">
<h3 id="orga9e3387">Auto Save</h3>
<div class="outline-text-3" id="text-orga9e3387">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;;</span><span class="org-comment">** 1.7 (info "(gnus)Auto Save")</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Enable showing of [Gmail]/* groups.</span>
  (<span class="org-keyword">setq</span> gnus-ignored-newsgroups <span class="org-string">""</span>)

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Unconditionally read the dribble file.</span>
  (<span class="org-keyword">setq</span> gnus-always-read-dribble-file t)
</pre>
</div>
</div>
</div>

<div id="outline-container-org38cdb75" class="outline-3">
<h3 id="org38cdb75">Active File</h3>
<div class="outline-text-3" id="text-org38cdb75">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;;</span><span class="org-comment">** 1.8 (info "(gnus)The Active File")</span>

  <span class="org-comment-delimiter">;;  </span><span class="org-comment">Gnus will only know about the groups in my `</span><span class="org-comment"><span class="org-constant">.newsrc</span></span><span class="org-comment">' file</span>
  (<span class="org-keyword">setq</span> gnus-read-active-file nil)      <span class="org-comment-delimiter">; </span><span class="org-comment">Speed-up.</span>

  (message <span class="org-string">"1 Starting Gnus... Done"</span>)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org67cd28d" class="outline-2">
<h2 id="org67cd28d">Group Buffer</h2>
<div class="outline-text-2" id="text-org67cd28d">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;;</span><span class="org-comment">* 2 (info "(gnus)The Group Buffer")</span>

  (message <span class="org-string">"2 Group Buffer..."</span>)
</pre>
</div>
</div>

<div id="outline-container-orgdef3162" class="outline-3">
<h3 id="orgdef3162">Group Buffer Format</h3>
<div class="outline-text-3" id="text-orgdef3162">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;;</span><span class="org-comment">** 2.1 (info "(gnus)Group Buffer Format")</span>

  (<span class="org-keyword">defun</span> <span class="org-function-name">gnus-user-format-function-y</span> (headers)
    <span class="org-doc">"Return string for count of unread articles."</span>
    (<span class="org-keyword">if</span> (&gt; (string-to-number gnus-tmp-number-of-unread) 0)
        (concat gnus-tmp-number-of-unread <span class="org-string">" Unread"</span>)
      <span class="org-string">""</span>))

  <span class="org-comment-delimiter">;; </span><span class="org-comment">(defun gnus-user-format-function-U (headers)</span>
  <span class="org-comment-delimiter">;;   </span><span class="org-comment">"Return string for count of unseen articles."</span>
  <span class="org-comment-delimiter">;;   </span><span class="org-comment">(if (&gt; (gnus-number-of-unseen-articles-in-group gnus-tmp-group) 0)</span>
  <span class="org-comment-delimiter">;;       </span><span class="org-comment">;; Found in gnus-group.el.</span>
  <span class="org-comment-delimiter">;;       </span><span class="org-comment">(concat (int-to-string</span>
  <span class="org-comment-delimiter">;;                </span><span class="org-comment">(gnus-number-of-unseen-articles-in-group</span>
  <span class="org-comment-delimiter">;;                 </span><span class="org-comment">gnus-tmp-group)) " Unseen")</span>
  <span class="org-comment-delimiter">;;     </span><span class="org-comment">""))</span>

  (<span class="org-keyword">defun</span> <span class="org-function-name">gnus-user-format-function-T</span> (headers)
    <span class="org-doc">"Return string for count of ticked articles."</span>
    (<span class="org-keyword">if</span> (&gt; (gnus-range-length (cdr (assq 'tick gnus-tmp-marked))) 0)
        (concat (int-to-string
                 (gnus-range-length (cdr (assq 'tick gnus-tmp-marked))))
                <span class="org-string">" Starred"</span>)
      <span class="org-string">""</span>))

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Create some faces.</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">(defface leuven-gnus-unseen '((t (:weight normal :foreground "#FC7202")))</span>
  <span class="org-comment-delimiter">;;   </span><span class="org-comment">"Face for count of unread articles.")</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">(defface leuven-gnus-total '((t (:foreground "#2EAE2C")))</span>
  <span class="org-comment-delimiter">;;   </span><span class="org-comment">"Face for size of article in summary buffer.")</span>

  (<span class="org-keyword">setq</span> gnus-face-1 'gnus-summary-normal-ticked)
  (<span class="org-keyword">setq</span> gnus-face-2 'gnus-summary-normal-unread)
  <span class="org-comment-delimiter">;; </span><span class="org-comment">(setq gnus-face-3 'leuven-gnus-unseen)</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">(setq gnus-face-4 'leuven-gnus-total)</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Format of the group buffer.</span>
  (<span class="org-keyword">setq</span> gnus-group-line-format (concat <span class="org-string">"%1{%M%}"</span>
                                       <span class="org-string">"%2{%m%}"</span>
                                       <span class="org-string">"  "</span>
                                       <span class="org-string">"%(%-42,42g%) "</span>
                                       <span class="org-string">"%2{%10uy%} "</span>
                                       <span class="org-comment-delimiter">;; </span><span class="org-comment">"%3{%10uU%} "</span>
                                       <span class="org-string">"%1{%10uT%} "</span>
                                       <span class="org-comment-delimiter">;; </span><span class="org-comment">"%4{%6t Total%}"</span>
                                       <span class="org-string">"\n"</span>))
</pre>
</div>
</div>
</div>

<div id="outline-container-org54b1754" class="outline-3">
<h3 id="org54b1754">Selecting a Group</h3>
<div class="outline-text-3" id="text-org54b1754">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;;</span><span class="org-comment">** 2.3 (info "(gnus)Selecting a Group")</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Groups of 200+ articles are NOT considered big.</span>
  (<span class="org-keyword">setq</span> gnus-large-newsgroup nil)
</pre>
</div>
</div>
</div>

<div id="outline-container-org87f69cb" class="outline-3">
<h3 id="org87f69cb">Exiting Gnus</h3>
<div class="outline-text-3" id="text-org87f69cb">
<p>
Cleanup all Gnus buffers on exit.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;;</span><span class="org-comment">** 2.15 (info "(gnus)Exiting Gnus")</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Quit Gnus properly, if it is running ...</span>
  (<span class="org-keyword">defun</span> <span class="org-function-name">leuven--exit-gnus</span> ()
    <span class="org-doc">"Save and exit Gnus."</span>
    (<span class="org-keyword">if</span> (<span class="org-keyword">and</span> (fboundp 'gnus-group-exit)
             (gnus-alive-p))
        (<span class="org-keyword">with-current-buffer</span> (get-buffer <span class="org-string">"*Group*"</span>)
          (<span class="org-keyword">let</span> (gnus-interactive-exit)
            (gnus-group-exit)))))

  <span class="org-comment-delimiter">;; </span><span class="org-comment">... before exiting Emacs (not leaving auto-save files around).</span>
  (add-hook 'kill-emacs-hook 'leuven--exit-gnus)
</pre>
</div>
</div>
</div>

<div id="outline-container-org48a4be6" class="outline-3">
<h3 id="org48a4be6">Group Topics</h3>
<div class="outline-text-3" id="text-org48a4be6">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;;</span><span class="org-comment">** 2.16 (info "(gnus)Group Topics")</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Permanently enable the topic mode.</span>
  (add-hook 'gnus-group-mode-hook 'gnus-topic-mode)

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Remove the binding of `C-c C-x', used by Org clocking commands.</span>
  (add-hook 'gnus-topic-mode-hook
            #'(lambda ()
              (define-key gnus-topic-mode-map
                (kbd <span class="org-string">"C-c C-x"</span>) nil)))
</pre>
</div>
</div>
</div>

<div id="outline-container-org7c94bd4" class="outline-3">
<h3 id="org7c94bd4">Misc Group Stuff</h3>
<div class="outline-text-3" id="text-org7c94bd4">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;;</span><span class="org-comment">** 2.17 (info "(gnus)Misc Group Stuff")</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">  <span class="org-comment-delimiter">;; </span><span class="org-comment">Turn off the column number in the group buffer, and remove the binding</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">of `C-c C-x', used by Org clocking commands.</span>
  (add-hook 'gnus-group-mode-hook
            #'(lambda ()
              (<span class="org-keyword">progn</span>
                (set (make-local-variable 'column-number-mode) nil)
                (define-key gnus-group-mode-map
                  (kbd <span class="org-string">"C-c C-x"</span>) nil))))
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">  <span class="org-comment-delimiter">;; </span><span class="org-comment">Jump to the first group with unread articles, after getting new news.</span>
  (add-hook 'gnus-after-getting-new-news-hook
            'gnus-group-first-unread-group)

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Keep track of when I last read a group.</span>
  (add-hook 'gnus-select-group-hook 'gnus-group-set-timestamp)
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">  (message <span class="org-string">"2 Group Buffer... Done"</span>)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org581424f" class="outline-2">
<h2 id="org581424f">Summary buffer</h2>
<div class="outline-text-2" id="text-org581424f">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;;</span><span class="org-comment">* 3 (info "(gnus)The Summary Buffer")</span>

  (message <span class="org-string">"3 Summary Buffer..."</span>)
</pre>
</div>
</div>

<div id="outline-container-org52bf35d" class="outline-3">
<h3 id="org52bf35d">Summary Buffer Format</h3>
<div class="outline-text-3" id="text-org52bf35d">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;;</span><span class="org-comment">** 3.1 (info "(gnus)Summary Buffer Format")</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">  <span class="org-comment-delimiter">;; </span><span class="org-comment">Auxiliary summary mode commands for Gnus.</span>
  (<span class="org-keyword">when</span> (try-require 'rs-gnus-summary-XXX)

    <span class="org-comment-delimiter">;; </span><span class="org-comment">Summary line indicators.</span>
    (<span class="org-keyword">setq</span> rs-gnus-summary-line-content-type-alist
          '((<span class="org-string">".*"</span> <span class="org-string">" "</span>)
            (<span class="org-string">"^multipart/mixed"</span> <span class="org-string">"@"</span>)))

    <span class="org-comment-delimiter">;; </span><span class="org-comment">Display `@' for message with attachment in summary line.</span>
    (<span class="org-keyword">defalias</span> '<span class="org-function-name">gnus-user-format-function-attachment</span>
      'rs-gnus-summary-line-content-type)

    <span class="org-comment-delimiter">;; </span><span class="org-comment">Alias for the score function.</span>
    (<span class="org-keyword">defalias</span> '<span class="org-function-name">gnus-user-format-function-score</span>
      'rs-gnus-summary-line-score))
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">  <span class="org-comment-delimiter">;; </span><span class="org-comment">Date format depending on age of article.</span>
  (<span class="org-keyword">setq</span> gnus-user-date-format-alist <span class="org-comment-delimiter">;; </span><span class="org-comment">`</span><span class="org-comment"><span class="org-constant">user-date</span></span><span class="org-comment">'</span>
        '(((gnus-seconds-today) . <span class="org-string">"Today, %H:%M"</span>)
          ((+ 86400 (gnus-seconds-today)) . <span class="org-string">"Yesterday, %H:%M"</span>)
          (604800 . <span class="org-string">"%A, %H:%M"</span>)
          ((gnus-seconds-month) . <span class="org-string">"%d %a %H:%M"</span>)
          ((gnus-seconds-year) . <span class="org-string">"%m-%d %a %H:%M"</span>)
          (t . <span class="org-string">"%Y-%m-%d %a %H:%M"</span>)))

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Create some faces.</span>
  (<span class="org-keyword">defface</span> <span class="org-variable-name">leuven-gnus-date</span> '((t (<span class="org-builtin">:foreground</span> <span class="org-string">"#FF80BF"</span>)))
    <span class="org-doc">"Face for date in summary buffer."</span>)
 (<span class="org-keyword">defface</span> <span class="org-variable-name">leuven-gnus-size</span> '((t (<span class="org-builtin">:foreground</span> <span class="org-string">"#8FBF60"</span>)))
    <span class="org-doc">"Face for size of article in summary buffer."</span>)

  (<span class="org-keyword">setq</span> gnus-face-7 'gnus-summary-high-unread)
  (<span class="org-keyword">setq</span> gnus-face-8 'leuven-gnus-date)
  (<span class="org-keyword">setq</span> gnus-face-9 'leuven-gnus-size)

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Format specification of the lines in the summary buffer.</span>
  (<span class="org-keyword">setq</span> gnus-summary-line-format
        <span class="org-comment-delimiter">;; </span><span class="org-comment">For the record, the default string is</span>
        <span class="org-comment-delimiter">;; </span><span class="org-comment">`%U%R%z%I%(%[%4L: %-20,20n%]%) %s\n'.</span>
        (concat
         <span class="org-string">"%U"</span>                           <span class="org-comment-delimiter">; </span><span class="org-comment">"read" status</span>
         <span class="org-string">"%3{%R%}"</span>                      <span class="org-comment-delimiter">; </span><span class="org-comment">"reply" status</span>
         <span class="org-string">"%7{%z%} "</span>                     <span class="org-comment-delimiter">; </span><span class="org-comment">score</span>
         <span class="org-string">"%8{%~(pad-left 20)&amp;user-date; %} "</span> <span class="org-comment-delimiter">; </span><span class="org-comment">date</span>
         <span class="org-string">"%9{ %4k %}"</span>                   <span class="org-comment-delimiter">; </span><span class="org-comment">size</span>
         <span class="org-string">"%*"</span> <span class="org-string">"%-15,15f "</span>               <span class="org-comment-delimiter">; </span><span class="org-comment">cursor before name of the poster</span>
         <span class="org-comment-delimiter">;; </span><span class="org-comment">(if (boundp 'rs-gnus-summary-line-content-type-alist)</span>
         <span class="org-comment-delimiter">;;     </span><span class="org-comment">"%u&amp;attachment; ")</span>
         <span class="org-string">"%u&amp;r;  "</span>
         <span class="org-string">"%B"</span>
         <span class="org-string">"%I%s"</span>
         <span class="org-string">"\n"</span>))

  <span class="org-comment-delimiter">;; </span><span class="org-comment">String indicating that the current article has the same subject as the</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">previous.</span>
  (<span class="org-keyword">setq</span> gnus-summary-same-subject <span class="org-string">""</span>)

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Strings indicating that the current article has the same subject as the</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">previous.</span>
  (<span class="org-keyword">if</span> (char-displayable-p ?\u2514)      <span class="org-comment-delimiter">; </span><span class="org-comment">Box drawings.</span>
      (<span class="org-keyword">progn</span>                            <span class="org-comment-delimiter">; </span><span class="org-comment">Tree layout using Unicode characters.</span>
        (<span class="org-keyword">setq</span> gnus-sum-thread-tree-root <span class="org-string">""</span>)
        (<span class="org-keyword">setq</span> gnus-sum-thread-tree-false-root <span class="org-string">""</span>)
        (<span class="org-keyword">setq</span> gnus-sum-thread-tree-single-indent <span class="org-string">""</span>)
        (<span class="org-keyword">setq</span> gnus-sum-thread-tree-indent <span class="org-string">"    "</span>)
        (<span class="org-keyword">setq</span> gnus-sum-thread-tree-vertical <span class="org-string">"â”‚   "</span>)
        (<span class="org-keyword">setq</span> gnus-sum-thread-tree-leaf-with-other <span class="org-string">"â”œâ”€â”€â”€"</span>)
        (<span class="org-keyword">setq</span> gnus-sum-thread-tree-single-leaf <span class="org-string">"â””â”€â”€â”€"</span>))
    (<span class="org-keyword">progn</span>                              <span class="org-comment-delimiter">; </span><span class="org-comment">Tree layout using ASCII characters.</span>
      (<span class="org-keyword">setq</span> gnus-sum-thread-tree-root <span class="org-string">""</span>)
      (<span class="org-keyword">setq</span> gnus-sum-thread-tree-false-root <span class="org-string">""</span>)
      (<span class="org-keyword">setq</span> gnus-sum-thread-tree-single-indent <span class="org-string">""</span>)
      (<span class="org-keyword">setq</span> gnus-sum-thread-tree-indent <span class="org-string">"    "</span>)
      (<span class="org-keyword">setq</span> gnus-sum-thread-tree-vertical <span class="org-string">"|   "</span>)
      (<span class="org-keyword">setq</span> gnus-sum-thread-tree-leaf-with-other <span class="org-string">"+---"</span>)
      (<span class="org-keyword">setq</span> gnus-sum-thread-tree-single-leaf <span class="org-string">"+---"</span>))) <span class="org-comment-delimiter">; </span><span class="org-comment">"`---"</span>

  (<span class="org-keyword">with-eval-after-load</span> <span class="org-string">"message"</span>
    <span class="org-comment-delimiter">;; </span><span class="org-comment">Regexp matching alternative email addresses.</span>
    (<span class="org-keyword">setq</span> message-alternative-emails
          (concat
           (regexp-quote <span class="org-string">"johndoe@example.com"</span>) <span class="org-string">"</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">"</span>
           (regexp-quote <span class="org-string">"janedoe@example.com"</span>)))

    <span class="org-comment-delimiter">;; </span><span class="org-comment">`</span><span class="org-comment"><span class="org-constant">From</span></span><span class="org-comment">' headers that may be suppressed in favor of `</span><span class="org-comment"><span class="org-constant">To</span></span><span class="org-comment">' headers.</span>
    (<span class="org-keyword">setq</span> gnus-ignored-from-addresses
          (concat
           (regexp-quote user-mail-address) <span class="org-string">"</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">"</span> message-alternative-emails)))

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Extra headers to parse (to check when matching recipients).</span>
  (<span class="org-keyword">when</span> (boundp 'nnmail-extra-headers)
    (add-to-list 'nnmail-extra-headers 'Cc))

  (<span class="org-keyword">defun</span> <span class="org-function-name">leuven-gnus-count-recipients</span> (header)
    <span class="org-doc">"Given a Gnus message header, returns priority mark.</span>
<span class="org-doc">  If I am the only recipient, return \"!\".</span>
<span class="org-doc">  If I am one of the recipients listed in To:, return \"T\".</span>
<span class="org-doc">  If I am one of a few recipients, return \"C\".</span>
<span class="org-doc">  If I am one of many recipients, return \"*\".</span>
<span class="org-doc">  Else, return \" \"."</span>
    (<span class="org-keyword">let*</span> ((to (<span class="org-keyword">or</span> (cdr (assoc 'To (<span class="org-keyword">mail-header-extra</span> header))) <span class="org-string">""</span>))
           (cc (<span class="org-keyword">or</span> (cdr (assoc 'Cc (<span class="org-keyword">mail-header-extra</span> header))) <span class="org-string">""</span>)))
      (<span class="org-keyword">cond</span>
       ((<span class="org-keyword">and</span> (string-match gnus-ignored-from-addresses to)
             (fboundp 'bbdb-split))
        (<span class="org-keyword">let</span> ((len (length (bbdb-split to <span class="org-string">","</span>))))
          (<span class="org-keyword">cond</span>
           ((= len 1) <span class="org-string">"Â»"</span>)
           (t <span class="org-string">"T"</span>))))
       ((<span class="org-keyword">and</span> (string-match gnus-ignored-from-addresses (concat to <span class="org-string">", "</span> cc))
             (fboundp 'bbdb-split))
        (<span class="org-keyword">if</span> (&lt; (length (bbdb-split (concat to <span class="org-string">", "</span> cc) <span class="org-string">","</span>)) 5)
            <span class="org-comment-delimiter">;; </span><span class="org-comment">Number of recipients to consider as large.</span>
            <span class="org-string">"C"</span>
          <span class="org-string">"*"</span>))
       (t <span class="org-string">" "</span>))))

  (<span class="org-keyword">defalias</span> '<span class="org-function-name">gnus-user-format-function-r</span> 'leuven-gnus-count-recipients)

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Format specification for the summary mode line.</span>
  (<span class="org-keyword">setq</span> gnus-summary-mode-line-format <span class="org-string">"%V: %%b"</span>)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgbda0e4c" class="outline-3">
<h3 id="orgbda0e4c">Reply, Followup and Post</h3>
<div class="outline-text-3" id="text-orgbda0e4c">
<p>
Messages posted via Usenet do not show up in the Emacs bug tracker. Avoid to
forget about this programmatically!
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;;</span><span class="org-comment">** 3.5 (info "(gnus)Reply Followup and Post")</span>

  (<span class="org-keyword">defun</span> <span class="org-function-name">leuven-gnus-summary-followup-with-original</span> ()
    <span class="org-doc">"Force sending messages to `</span><span class="org-doc"><span class="org-constant">gnu.emacs.bug</span></span><span class="org-doc">' per email."</span>
    (<span class="org-keyword">interactive</span>)
    (<span class="org-keyword">if</span> (string-match (<span class="org-keyword">rx</span> <span class="org-string">"gnu.emacs.bug"</span>) gnus-newsgroup-name)
                                        <span class="org-comment-delimiter">; </span><span class="org-comment">Answer per email.</span>
        (call-interactively 'gnus-summary-wide-reply-with-original)
                                        <span class="org-comment-delimiter">; </span><span class="org-comment">Post via news.</span>
      (call-interactively 'gnus-summary-followup-with-original)))

  (<span class="org-keyword">with-eval-after-load</span> <span class="org-string">"gnus-sum"</span>
    (define-key gnus-summary-mode-map
      (kbd <span class="org-string">"F"</span>) 'leuven-gnus-summary-followup-with-original))
</pre>
</div>

<p>
Source: Michael Heerdegen.
</p>
</div>
</div>

<div id="outline-container-org5c54d41" class="outline-3">
<h3 id="org5c54d41">Marking Articles</h3>
<div class="outline-text-3" id="text-org5c54d41">
<p>
<a href="https://github.com/cofi/dotfiles/blob/master/gnus.el">https://github.com/cofi/dotfiles/blob/master/gnus.el</a>
</p>
</div>

<div id="outline-container-orged9594d" class="outline-4">
<h4 id="orged9594d">Unread Articles</h4>
<div class="outline-text-4" id="text-orged9594d">
<div class="org-src-container">
<pre class="src src-emacs-lisp">  (<span class="org-keyword">when</span> (char-displayable-p ?\u2691)
    (<span class="org-keyword">setq</span> gnus-ticked-mark ?âš‘))

  (<span class="org-keyword">when</span> (char-displayable-p ?\u2690)
    (<span class="org-keyword">setq</span> gnus-dormant-mark ?âš))

  (<span class="org-keyword">when</span> (char-displayable-p ?\u2709)
    (<span class="org-keyword">setq</span> gnus-unread-mark ?âœ‰))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgcd324db" class="outline-4">
<h4 id="orgcd324db">Read Articles</h4>
<div class="outline-text-4" id="text-orgcd324db">
<div class="org-src-container">
<pre class="src src-emacs-lisp">  (<span class="org-keyword">when</span> (char-displayable-p ?\u2717)
    (<span class="org-keyword">setq</span> gnus-del-mark ?âœ—))

  (<span class="org-keyword">when</span> (char-displayable-p ?\u2713)
    (<span class="org-keyword">setq</span> gnus-read-mark ?âœ“))

  (<span class="org-keyword">setq</span> gnus-ancient-mark ? )

  (<span class="org-keyword">when</span> (char-displayable-p ?\u2620)
    (<span class="org-keyword">setq</span> gnus-killed-mark ?â˜ ))

  (<span class="org-keyword">when</span> (char-displayable-p ?\u2197)
    (<span class="org-keyword">setq</span> gnus-canceled-mark ?â†—))

  (<span class="org-keyword">when</span> (char-displayable-p ?\u267B)
    (<span class="org-keyword">setq</span> gnus-expirable-mark ?â™»))
</pre>
</div>
</div>
</div>

<div id="outline-container-org88c7755" class="outline-4">
<h4 id="org88c7755">Other marks</h4>
<div class="outline-text-4" id="text-org88c7755">
<div class="org-src-container">
<pre class="src src-emacs-lisp">  (<span class="org-keyword">when</span> (char-displayable-p ?\u21BA)
    (<span class="org-keyword">setq</span> gnus-replied-mark ?â†º))

  (<span class="org-keyword">when</span> (char-displayable-p ?\u21AA)
    (<span class="org-keyword">setq</span> gnus-forwarded-mark ?â†ª))

  (<span class="org-keyword">when</span> (char-displayable-p ?\u260D)
    (<span class="org-keyword">setq</span> gnus-cached-mark ?â˜))

  (<span class="org-keyword">when</span> (char-displayable-p ?\u2729)
    (<span class="org-keyword">setq</span> gnus-unseen-mark ?âœ©))

  (<span class="org-keyword">when</span> (char-displayable-p ?\u2699)
    (<span class="org-keyword">setq</span> gnus-process-mark ?âš™))
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">  (<span class="org-keyword">when</span> (char-displayable-p ?\u2605)
    (<span class="org-keyword">setq</span> gnus-recent-mark ?â˜…))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgcb946a7" class="outline-4">
<h4 id="orgcb946a7">Score Variables</h4>
<div class="outline-text-4" id="text-orgcb946a7">
<div class="org-src-container">
<pre class="src src-emacs-lisp">  (<span class="org-keyword">when</span> (char-displayable-p ?\u2191)
    (<span class="org-keyword">setq</span> gnus-score-over-mark ?â†‘))

  (<span class="org-keyword">when</span> (char-displayable-p ?\u2193)
    (<span class="org-keyword">setq</span> gnus-score-below-mark ?â†“))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org4570681" class="outline-3">
<h3 id="org4570681">Threading</h3>
<div class="outline-text-3" id="text-org4570681">
<p>
Threading is the representation of discussions &ldquo;as they happen&rdquo;.
</p>

<p>
Use <code>T T</code> to toggle threading.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;;</span><span class="org-comment">** 3.9 (info "(gnus)Threading")</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Gather threads by comparing the Subject header of the articles.</span>
  (<span class="org-keyword">setq</span> gnus-summary-thread-gathering-function
        'gnus-gather-threads-by-subject)
        <span class="org-comment-delimiter">;; </span><span class="org-comment">'gnus-gather-threads-by-references)</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Don't grab old headers to build threads.</span>
  (<span class="org-keyword">setq</span> gnus-fetch-old-headers nil)     <span class="org-comment-delimiter">; </span><span class="org-comment">nil to speed up (otherwise, it can</span>
                                        <span class="org-comment-delimiter">; </span><span class="org-comment">seriously impact performance).</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">;; Fill in all the gaps to tie loose threads together.</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">(setq gnus-build-sparse-threads 'some)</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">;; Sort the articles within a thread after it has been gathered together.</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">(setq gnus-sort-gathered-threads-function 'gnus-thread-sort-by-date)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orge1b0b16" class="outline-3">
<h3 id="orge1b0b16">Sorting the Summary Buffer</h3>
<div class="outline-text-3" id="text-orge1b0b16">
<p>
<b>Primary</b> sort key should be the <b>last</b> function in the list.
</p>

<div class="tip">
<p>
You should always include <code>gnus-thread-sort-by-number</code> in the list, probably as
first (least important) element.
</p>

</div>

<div class="warning">
<p>
Sorting by date is often much slower than sorting by number, and the sorting
order is very similar.
</p>

</div>

<p>
The threads with the highest article scores in total are on top in my summary
buffers. For threads with equal scores, I sort by the most recent article in
a thread (older before younger, thus the not). If that still doesn&rsquo;t distinguish
2 threads, it&rsquo;s sorted by article number (that should always be included as last
element to guarantee a total ordering).
</p>

<p>
By the way: in mail groups (except for mailing list groups), I disable scoring,
so there the sorting by recency of youngest message in thread is the decision
maker.  I like that in older-before-younger order, because then I read older
replies to an article before younger replies.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;;</span><span class="org-comment">** 3.10 (info "(gnus)Sorting the Summary Buffer")</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Sort threads in descending article order.</span>
  (<span class="org-keyword">setq</span> gnus-thread-sort-functions
        '(gnus-thread-sort-by-number
          (not gnus-thread-sort-by-most-recent-date)
          <span class="org-comment-delimiter">;; </span><span class="org-comment">gnus-thread-sort-by-total-score</span>
          ))

  <span class="org-comment-delimiter">;; </span><span class="org-comment">If needed, look at `</span><span class="org-comment"><span class="org-constant">gnus-subthread-sort-functions</span></span><span class="org-comment">' for sorting</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">subthreads in the summary buffer.</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orge89e569" class="outline-3">
<h3 id="orge89e569">Article Treatment</h3>
<div class="outline-text-3" id="text-orge89e569">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;;</span><span class="org-comment">** 3.18 (info "(gnus)Article Treatment")</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Change a `</span><span class="org-comment"><span class="org-constant">\205</span></span><span class="org-comment">' figure to "...".</span>
  (add-hook 'gnus-part-display-hook 'article-treat-dumbquotes)
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">  <span class="org-comment-delimiter">;; </span><span class="org-comment">What is to be considered a signature.</span>
  (<span class="org-keyword">setq</span> gnus-signature-separator
        '(<span class="org-string">"^-- $"</span>                       <span class="org-comment-delimiter">; </span><span class="org-comment">The standard.</span>
          <span class="org-string">"^________*$"</span>))               <span class="org-comment-delimiter">; </span><span class="org-comment">A long line of underscores is also</span>
                                        <span class="org-comment-delimiter">; </span><span class="org-comment">popular.</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Limit (in lines, in floating point) to what is considered a signature.</span>
  (<span class="org-keyword">setq</span> gnus-signature-limit 20.0)
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">  (<span class="org-keyword">defun</span> <span class="org-function-name">leuven-prefix-line</span> ()
    <span class="org-doc">"Prefix the current line with `&gt;'."</span>
    (<span class="org-keyword">interactive</span>)
    (beginning-of-line)
    (<span class="org-keyword">while</span>
        (<span class="org-keyword">progn</span>
          <span class="org-comment-delimiter">;; </span><span class="org-comment">Repeat...</span>
          (<span class="org-keyword">if</span> (looking-at <span class="org-string">"[&gt;\n]"</span>)
              (insert <span class="org-string">"&gt;"</span>)
            (insert <span class="org-string">"&gt; "</span>))
          (forward-line 1)
          (beginning-of-line)
          (not
           <span class="org-comment-delimiter">;; </span><span class="org-comment">...until blank line found.</span>
           (looking-at <span class="org-string">" *$"</span>)))))

  (global-set-key (kbd <span class="org-string">"&lt;S-f5&gt;"</span>) 'leuven-prefix-line)
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">  <span class="org-comment-delimiter">;; </span><span class="org-comment">Banners to remove.</span>
  (<span class="org-keyword">setq</span> gnus-article-address-banner-alist
        '((<span class="org-string">"@yahoo\\.com"</span> .
           <span class="org-string">"^__________________+\nDo you Yahoo!\\?\n.*\n.*\n"</span>)
          (<span class="org-string">"@hotmail\\.com</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">@msn.com"</span> .
           <span class="org-string">"^_________________________________________________________________\n.*MSN .*\n.*\n"</span>)))

  <span class="org-comment-delimiter">;; </span><span class="org-comment">FIXME This is under test!</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">L'affichage des messages</span>
  (<span class="org-keyword">setq</span> gnus-article-display-hook
        '(gnus-article-hide-headers-if-wanted
          gnus-article-date-lapsed
          gnus-article-hide-pgp
          gnus-article-treat-overstrike
          gnus-article-de-quoted-unreadable
          gnus-article-strip-leading-blank-lines
          gnus-article-remove-trailing-blank-lines
          gnus-article-strip-multiple-blank-lines
          gnus-article-highlight
          gnus-article-highlight-signature
          gnus-article-emphasize
          gnus-article-fill-cited-article))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgfab4377" class="outline-3">
<h3 id="orgfab4377">MIME Commands</h3>
<div class="outline-text-3" id="text-orgfab4377">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;;</span><span class="org-comment">** 3.19 (info "(gnus)MIME Commands")</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Rewrite file names of MIME parts (delete control characters, delete shell</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">gotchas, handle evil white spaces).</span>
  (<span class="org-keyword">setq</span> mm-file-name-rewrite-functions
        '(mm-file-name-delete-control
          mm-file-name-delete-gotchas
          mm-file-name-trim-whitespace
          mm-file-name-collapse-whitespace
          mm-file-name-replace-whitespace))
</pre>
</div>
</div>
</div>

<div id="outline-container-org3dfcebc" class="outline-3">
<h3 id="org3dfcebc">Charsets</h3>
<div class="outline-text-3" id="text-org3dfcebc">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;;</span><span class="org-comment">** 3.20 (info "(gnus)Charsets")</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Permitted unencoded charsets for posting.</span>
  (<span class="org-keyword">setq</span> gnus-group-posting-charset-alist
        '((message-this-is-news nil (iso-8859-15))))
</pre>
</div>
</div>
</div>

<div id="outline-container-org109df8c" class="outline-3">
<h3 id="org109df8c">Various Summary Stuff</h3>
<div class="outline-text-3" id="text-org109df8c">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;;</span><span class="org-comment">** 3.27 (info "(gnus)Various Summary Stuff")</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Search forward for an article containing a given regexp.</span>
  (define-key gnus-summary-mode-map
    (kbd <span class="org-string">"s"</span>) 'gnus-summary-search-article-forward)

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Repeat the last search through the articles in the summary buffer</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">(without requiring a confirmation of the search string each time).</span>
  (<span class="org-keyword">defun</span> <span class="org-function-name">gnus-summary-search-article-forward-next</span> ()
    <span class="org-doc">"Repeat the last forward search."</span>
    (<span class="org-keyword">interactive</span>)
    (gnus-summary-search-article-forward gnus-last-search-regexp nil))
  <span class="org-comment-delimiter">;; </span><span class="org-comment">TODO `</span><span class="org-comment"><span class="org-constant">g-s-s-a-f-next</span></span><span class="org-comment">' should be the only function to be called by the</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">user, whether or not the search is made for the first time or a</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">repetition of it.</span>

  (define-key gnus-summary-mode-map
    (kbd <span class="org-string">"M-s"</span>) 'gnus-summary-search-article-forward-next)

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Turn off the column number in the group buffer.</span>
  (add-hook 'gnus-summary-mode-hook
            #'(lambda ()
              (set (make-local-variable 'column-number-mode) nil)))
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">  (add-hook 'gnus-summary-mode-hook
            #'(lambda ()
              (local-set-key <span class="org-string">"D"</span> 'delete-then-read-next)
              (local-set-key <span class="org-string">"d"</span> 'gnus-summary-put-mark-as-expirable-next)
              (local-set-key <span class="org-string">"u"</span> 'gnus-summary-clear-mark-forward)
              (local-set-key <span class="org-string">"x"</span> 'expunge-and-reload)
              (local-set-key <span class="org-string">"v"</span> 'gnus-article-view-part)
              (local-set-key (kbd <span class="org-string">"C-a"</span>) 'gnus-summary-save-parts)))
</pre>
</div>
</div>

<div id="outline-container-orgc15fe7b" class="outline-4">
<h4 id="orgc15fe7b"><a href="http://www.emacswiki.org/emacs/GnusStripes">Gnus Stripes</a></h4>
<div class="outline-text-4" id="text-orgc15fe7b">
<p>
The following does work, but hides the read background for read postings, as the
stripe background is superimposed on my &ldquo;read&rdquo; background.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">  <span class="org-comment-delimiter">;; </span><span class="org-comment">The color of the stripes is obtained by dimming the frame background color.</span>
  (<span class="org-keyword">defvar</span> <span class="org-variable-name">stripe-intensity</span> 12
    <span class="org-doc">"*Intensity of the shade. Used to compute the color of the stripes.</span>
<span class="org-doc">0 means no shading of the background color, nil means gray80"</span>)

  <span class="org-comment-delimiter">;; </span><span class="org-comment">A command that computes the rgb code of the shaded background color.</span>
  (<span class="org-keyword">defun</span> <span class="org-function-name">shade-color</span> (intensity)
    <span class="org-doc">"print the #rgb color of the background, dimmed according to intensity"</span>
    (<span class="org-keyword">interactive</span> <span class="org-string">"nIntensity of the shade : "</span>)
    (apply 'format <span class="org-string">"#%02x%02x%02x"</span>
           (mapcar #'(lambda (x)
                     (<span class="org-keyword">if</span> (&gt; (lsh x -8) intensity)
                         (- (lsh x -8) intensity)
                       0))
                   (color-values
                    (cdr (assoc 'background-color (frame-parameters)))))))

  <span class="org-comment-delimiter">;; </span><span class="org-comment">The command that actually puts the stripes in the current buffer.</span>
  (<span class="org-keyword">defun</span> <span class="org-function-name">stripe-alternate</span> ()
    <span class="org-doc">"stripes all down the current buffer"</span>
    (<span class="org-keyword">interactive</span>)
    <span class="org-comment-delimiter">;; </span><span class="org-comment">Compute the color of the stripes from the value of stripe-intensity.</span>
    (<span class="org-keyword">if</span> stripe-intensity
        (<span class="org-keyword">setq</span> stripe-overlay-face (shade-color stripe-intensity))
      (<span class="org-keyword">setq</span> stripe-overlay-face <span class="org-string">"gray80"</span>))
    <span class="org-comment-delimiter">;; </span><span class="org-comment">Put the overlay in the current buffer.</span>
    (<span class="org-keyword">save-excursion</span>
      (goto-char (point-min))
      (<span class="org-keyword">let</span> (stripe-overlay)
        (<span class="org-keyword">while</span> (not (eobp))
          (forward-line)
          (<span class="org-keyword">setq</span> stripe-overlay
                (make-overlay (line-beginning-position)
                              (line-beginning-position 2)))
          (overlay-put stripe-overlay 'face
                       (list <span class="org-builtin">:background</span> stripe-overlay-face))
          (overlay-put stripe-overlay 'priority -1)
          (forward-line)))))

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Activate the stripes for the mail buffers only.</span>
  (add-hook 'gnus-summary-prepare-hook
            #'(lambda ()
              (<span class="org-keyword">with-current-buffer</span> gnus-summary-buffer
                <span class="org-comment-delimiter">;; </span><span class="org-comment">(unless (gnus-news-group-p gnus-newsgroup-name)</span>
                (stripe-alternate))))
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">  (message <span class="org-string">"3 Summary Buffer... Done"</span>)
</pre>
</div>
</div>
</div>
</div>
</div>

<div id="outline-container-org24631b5" class="outline-2">
<h2 id="org24631b5">Article Buffer</h2>
<div class="outline-text-2" id="text-org24631b5">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;;</span><span class="org-comment">* 4 (info "(gnus)The Article Buffer")</span>

  (message <span class="org-string">"4 Article Buffer..."</span>)
</pre>
</div>
</div>

<div id="outline-container-org1b0346b" class="outline-3">
<h3 id="org1b0346b">Hiding headers</h3>
<div class="outline-text-3" id="text-org1b0346b">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;;</span><span class="org-comment">** 4.1 Hiding headers</span>

  (<span class="org-keyword">with-eval-after-load</span> <span class="org-string">"gnus-art"</span>
     <span class="org-comment-delimiter">;; </span><span class="org-comment">TODO Could be limited to news headers only.</span>
     (<span class="org-keyword">setq</span> gnus-visible-headers
           (concat
           <span class="org-string">"^User-Agent:</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">^X-Spam-Level:</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">^X-Report-Spam:</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">"</span>
           gnus-visible-headers))

     <span class="org-comment-delimiter">;; </span><span class="org-comment">When Gnus, highlight user agent.</span>
     (add-to-list
      'gnus-header-face-alist
      (list (concat
             <span class="org-string">"^"</span>
             (regexp-opt '(<span class="org-string">"User-Agent"</span> <span class="org-string">"X-Mailer"</span> <span class="org-string">"Newsreader"</span> <span class="org-string">"X-Newsreader"</span>) t)
             <span class="org-string">":.*Gnus.*"</span>)
            nil 'gnus-server-opened)))

  <span class="org-comment-delimiter">;; </span><span class="org-comment">,----[ (info "(gnus)Choosing Commands") ]</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">| `G j'</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">| `j'</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">|      Ask for an article number or `</span><span class="org-comment"><span class="org-constant">Message-ID</span></span><span class="org-comment">', and then go to that</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">|      article (`</span><span class="org-comment"><span class="org-constant">gnus-summary-goto-article</span></span><span class="org-comment">').</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">`----</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">&gt; At the moment, I am appending the `</span><span class="org-comment"><span class="org-constant">Message-ID</span></span><span class="org-comment">' to</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">&gt; `</span><span class="org-comment"><span class="org-constant">http://groups.google.com/groups?selm=</span></span><span class="org-comment">' to get the target URL, but</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">&gt; this does not work reliably.</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Auxiliary article mode commands for Gnus.</span>
  (<span class="org-keyword">when</span> (try-require 'rs-gnus-article-XXX)
    <span class="org-comment-delimiter">;; </span><span class="org-comment">FIXME Break my 2-column display for the mails (summary | article).</span>

    <span class="org-comment-delimiter">;; </span><span class="org-comment">Initialization.</span>
    (rs-gnus-buttons)

    <span class="org-comment-delimiter">;; </span><span class="org-comment">(defun rs-gnus-button-browse-mid (mid)</span>
    <span class="org-comment-delimiter">;;   </span><span class="org-comment">"Browse MID on Google or Gmane."</span>
    <span class="org-comment-delimiter">;;   </span><span class="org-comment">(message "mid=`</span><span class="org-comment"><span class="org-constant">%s</span></span><span class="org-comment">'" mid)</span>
    <span class="org-comment-delimiter">;;   </span><span class="org-comment">(browse-url (concat</span>
    <span class="org-comment-delimiter">;;                </span><span class="org-comment">(if (string-match "\\bgmane\\." gnus-newsgroup-name)</span>
    <span class="org-comment-delimiter">;;                    </span><span class="org-comment">"http://thread.gmane.org/31"</span>
    <span class="org-comment-delimiter">;;                  </span><span class="org-comment">"http://groups.google.com/groups?as_umsgid=32")</span>
    <span class="org-comment-delimiter">;;                </span><span class="org-comment">mid)))</span>

    <span class="org-comment-delimiter">;; </span><span class="org-comment">Open the article in the browser when clicking (or using `</span><span class="org-comment"><span class="org-constant">RET</span></span><span class="org-comment">') on a</span>
    <span class="org-comment-delimiter">;; </span><span class="org-comment">mid in `</span><span class="org-comment"><span class="org-constant">References</span></span><span class="org-comment">' and `</span><span class="org-comment"><span class="org-constant">Message-ID</span></span><span class="org-comment">' headers.</span>
    (add-to-list
     'gnus-header-button-alist
     '(<span class="org-string">"^</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(</span></span><span class="org-string">References</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">Message-I[Dd]</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string">:"</span> <span class="org-string">"&lt;</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(</span></span><span class="org-string">[</span><span class="org-string"><span class="org-negation-char">^</span></span><span class="org-string">&lt;&gt;]+</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string">&gt;"</span>
       1 (&gt;= gnus-button-message-level 0) rs-gnus-button-browse-mid 1)
     t)) <span class="org-comment-delimiter">;; </span><span class="org-comment">append!</span>

<span class="org-comment-delimiter">;;</span><span class="org-comment">** 4.2 (info "(gnus)Using MIME")</span>

  (message <span class="org-string">"Emacs MIME..."</span>)
</pre>
</div>

<div class="note">
<p>
Use <code>K i</code> from the summary buffer (or <code>i</code> on the MIME button in the article buffer)
to insert the contents of the MIME object into the buffer
(<code>gnus-mime-inline-part</code>) as <code>text/plain</code>, in order to read them directly in Gnus.
</p>

</div>
</div>
</div>
</div>

<div id="outline-container-orga45d97c" class="outline-2">
<h2 id="orga45d97c">Emacs MIME</h2>
<div class="outline-text-2" id="text-orga45d97c">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;;</span><span class="org-comment">* (info "(emacs-mime)Top")</span>
</pre>
</div>
</div>

<div id="outline-container-orgbc3eade" class="outline-3">
<h3 id="orgbc3eade">Decoding and Viewing</h3>
<div class="outline-text-3" id="text-orgbc3eade">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;;</span><span class="org-comment">** 1 (info "(emacs-mime)Decoding and Viewing")</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd3bacdc" class="outline-3">
<h3 id="orgd3bacdc">Non-MIME</h3>
<div class="outline-text-3" id="text-orgd3bacdc">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;;</span><span class="org-comment">*** 1.2 (info "(emacs-mime)Non-MIME")</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">;; Regexp of Emacs sources groups.</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">(setq mm-uu-emacs-sources-regexp "emacs")</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Regexp matching diff groups.</span>
  (<span class="org-keyword">setq</span> mm-uu-diff-groups-regexp <span class="org-string">".*"</span>)

  <span class="org-comment-delimiter">;; </span><span class="org-comment">;; Regexp matching TeX groups.</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">(setq mm-uu-tex-groups-regexp ".*")</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org170ccb9" class="outline-3">
<h3 id="org170ccb9">Display Customization</h3>
<div class="outline-text-3" id="text-org170ccb9">
<p>
Recent Gnus has a built-in HTML renderer (the EWW backend?) &#x2013; which even
somewhat handles CSS &#x2013; to render HTML-only mails.
</p>

<p>
You can view <code>text/html</code> parts of the current article with a Web browser by
pressing <code>K H</code> (<code>gnus-article-browse-html-article</code>).
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;;</span><span class="org-comment">*** 1.5 (info "(emacs-mime)Display Customization")</span>

  (<span class="org-keyword">with-eval-after-load</span> <span class="org-string">"mm-decode"</span>
    <span class="org-comment-delimiter">;; </span><span class="org-comment">;; MIME type that will be displayed externally automatically.</span>
    <span class="org-comment-delimiter">;; </span><span class="org-comment">(add-to-list 'mm-automatic-external-display "text/html")</span>

    <span class="org-comment-delimiter">;; </span><span class="org-comment">Do not treat inline images as real attachments (display them, instead).</span>
    (add-to-list 'mm-attachment-override-types <span class="org-string">"image/.*"</span>)

    <span class="org-comment-delimiter">;; </span><span class="org-comment">Don't render HTML automatically *when plain text alternative is</span>
    <span class="org-comment-delimiter">;; </span><span class="org-comment">available*.</span>
    (add-to-list 'mm-discouraged-alternatives <span class="org-string">"text/html"</span>)
    (add-to-list 'mm-discouraged-alternatives <span class="org-string">"text/richtext"</span>)
    (add-to-list 'mm-discouraged-alternatives <span class="org-string">"text/enriched"</span>)
    (add-to-list 'mm-discouraged-alternatives <span class="org-string">"multipart/related"</span>)

    <span class="org-comment-delimiter">;; </span><span class="org-comment">All images fit in the buffer.</span>
    (<span class="org-keyword">setq</span> mm-inline-large-images t))
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;;</span><span class="org-comment">*** 1.6 (info "(emacs-mime)Files and Directories")</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Default directory for saving attachments.</span>
  (<span class="org-keyword">setq</span> mm-default-directory
        (<span class="org-keyword">cond</span> ((<span class="org-keyword">or</span> (eq system-type 'windows-nt)
                   (eq system-type 'cygwin))
               <span class="org-string">"~/"</span>)
              (t                        <span class="org-comment-delimiter">; </span><span class="org-comment">Linux</span>
               <span class="org-string">"~/Desktop/"</span>)))

  (<span class="org-keyword">when</span> (fboundp 'leuven-make-directory-yes-or-no)
    (leuven-make-directory-yes-or-no mm-default-directory))

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Directory for storing temporary files (opened attachments as well).</span>
  (<span class="org-keyword">setq</span> mm-tmp-directory temporary-file-directory)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb0d009b" class="outline-3">
<h3 id="orgb0d009b">Basic Functions</h3>
<div class="outline-text-3" id="text-orgb0d009b">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;;</span><span class="org-comment">** 4 (info "(emacs-mime)Basic Functions")</span>

<span class="org-comment-delimiter">;;</span><span class="org-comment">*** 4.12 (info "(emacs-mime)mailcap")</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Choose the right MIME type when sending an attachment.</span>
  (<span class="org-keyword">with-eval-after-load</span> <span class="org-string">"mailcap"</span>
     (add-to-list 'mailcap-mime-extensions
                  '(<span class="org-string">".doc"</span> . <span class="org-string">"application/msword"</span>))
     (add-to-list 'mailcap-mime-extensions
                  '(<span class="org-string">".ppt"</span> . <span class="org-string">"application/vnd.ms-powerpoint"</span>)))
                                        <span class="org-comment-delimiter">; </span><span class="org-comment">MIME content-types keyed by file ext.</span>
</pre>
</div>

<div class="tip">
<p>
In both Windows and Cygwin Emacs, clicking on an attachment will launch the
application specified in your <code>~/.mailcap</code> file.  Put there <code>cygstart "%s"</code> to
launch the default apps!
</p>

</div>
</div>
</div>
</div>

<div id="outline-container-orgc0f4e9a" class="outline-2">
<h2 id="orgc0f4e9a">Back to Article Buffer</h2>
<div class="outline-text-2" id="text-orgc0f4e9a">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;;</span><span class="org-comment">** 4.4 (info "(gnus)Customizing Articles")</span>

  (<span class="org-keyword">when</span> (try-require 'gnus-art)

    <span class="org-comment-delimiter">;; </span><span class="org-comment">Add buttons.</span>
    (<span class="org-keyword">setq</span> gnus-treat-buttonize t)

    <span class="org-comment-delimiter">;; </span><span class="org-comment">Add buttons to the head.</span>
    (<span class="org-keyword">setq</span> gnus-treat-buttonize-head 'head))
</pre>
</div>

<p>
Toggle coloring from HTML emails:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">  <span class="org-comment-delimiter">;; </span><span class="org-comment">From Tassilo Horn, 2014-07-17.</span>
  (<span class="org-keyword">setq</span> shr-color-visible-distance-min 10)
  (<span class="org-keyword">setq</span> shr-color-visible-luminance-min 60)
  (<span class="org-keyword">setq</span> gnus-treat-fill-article 0)
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;;</span><span class="org-comment">** 4.6 (info "(gnus)Misc Article")</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Format specification for the article mode line.</span>
  (<span class="org-keyword">setq</span> gnus-article-mode-line-format <span class="org-string">"%S%m"</span>)
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">  <span class="org-comment-delimiter">;; </span><span class="org-comment">Make `C-c C-f' active from within messages.</span>
  (define-key gnus-article-mode-map
    (kbd <span class="org-string">"C-c C-f"</span>) 'gnus-summary-mail-forward)
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">  (message <span class="org-string">"4 Article Buffer... Done"</span>)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgcf62db3" class="outline-2">
<h2 id="orgcf62db3">Composing Messages</h2>
<div class="outline-text-2" id="text-orgcf62db3">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;;</span><span class="org-comment">* 5 (info "(gnus)Composing Messages")</span>

  (message <span class="org-string">"5 Composing Messages..."</span>)
</pre>
</div>
</div>

<div id="outline-container-org4e82021" class="outline-3">
<h3 id="org4e82021">Mail</h3>
<div class="outline-text-3" id="text-org4e82021">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;;</span><span class="org-comment">** 5.1 (info "(gnus)Mail")</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Gnus requests confirmation when replying to news (unlike mail).</span>
  (<span class="org-keyword">setq</span> gnus-confirm-mail-reply-to-news t)
</pre>
</div>
</div>
</div>

<div id="outline-container-orge1f1267" class="outline-3">
<h3 id="orge1f1267">Posting Server</h3>
<div class="outline-text-3" id="text-orge1f1267">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;;</span><span class="org-comment">** 5.2 (info "(gnus)Posting Server")</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Control the hostname sent in the first EHLO or HELO command sent to the</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">server (client sends `EHLO CLARK.smtpmail-local-domain').</span>
  (<span class="org-keyword">setq</span> smtpmail-local-domain
        <span class="org-string">"i-did-not-set--mail-host-address--so-tickle-me"</span>)
        <span class="org-comment-delimiter">;;              </span><span class="org-comment">^^^^^^^^^^^^^^^^^</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Make the SMTP library add `@' and the specified domain name to</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">recipients specified in the message when they are sent using the RCPT</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">TO command (or when we simply enter an email address without its</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">domain extension).</span>
  (<span class="org-keyword">setq</span> smtpmail-sendto-domain <span class="org-string">"local"</span>)
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">  <span class="org-comment-delimiter">;; </span><span class="org-comment">Print info in buffer *trace of SMTP session to &lt;somewhere&gt;*.</span>
  (<span class="org-keyword">setq</span> smtpmail-debug-info t)          <span class="org-comment-delimiter">; </span><span class="org-comment">Only to debug problems.</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Send the SMTP VERB command (enabling verbose information from the SMTP</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">server).</span>
  (<span class="org-keyword">setq</span> smtpmail-debug-verb t)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd82dd75" class="outline-3">
<h3 id="orgd82dd75">Archived Messages</h3>
<div class="outline-text-3" id="text-orgd82dd75">
<p>
The <code>Gcc:</code> header is about in which group to save the messages you&rsquo;ve written.
</p>

<p>
<code>gnus-message-archive-group</code> specifies which (if any) <code>Gcc:</code> header is inserted when
a message buffer is <b>created</b>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;;</span><span class="org-comment">** 5.5 (info "(gnus)Archived Messages")</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Group in which to save the messages you've written.</span>
  (<span class="org-keyword">setq</span> gnus-message-archive-group <span class="org-string">"nnimap:INBOX.Sent"</span>) <span class="org-comment-delimiter">; </span><span class="org-comment">Sent Items?</span>
</pre>
</div>

<p>
The <code>Gcc:</code> header at the time of <b>sending</b> the message specifies where it is
archived.
</p>

<p>
If you want to be asked for each <b>message to be sent</b>, you can change the <code>Gcc:</code>
header in the <code>message-send-hook</code>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">  <span class="org-comment-delimiter">;; </span><span class="org-comment">The Gcc Header specifies a local mail box that receives a copy of the sent</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">article.</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">"Gcc:"-chooser, from Christoph Conrad.</span>
  (<span class="org-keyword">defvar</span> <span class="org-variable-name">header-gcc-history</span> nil)
  (<span class="org-keyword">defun</span> <span class="org-function-name">leuven-choose-gcc</span>()
    (<span class="org-keyword">interactive</span>)
    (<span class="org-keyword">let*</span> (<span class="org-comment-delimiter">;; </span><span class="org-comment">if this "group" is chosen the default "Gcc" remains</span>
           (default <span class="org-string">"INBOX.Sent"</span>)
           <span class="org-comment-delimiter">;; </span><span class="org-comment">if this "group" is chosen the default "Gcc" is deleted</span>
           (delete <span class="org-string">"INBOX.Trash"</span>)
           <span class="org-comment-delimiter">;; </span><span class="org-comment">else the choosen group is inserted as "Gcc:"</span>
           (groups (append gnus-newsrc-alist (list (list default 'dummy)
                                                   (list delete  'dummy))))
           (group (completing-read <span class="org-string">"Gcc: "</span>
                                   groups
                                   nil t default 'header-gcc-history))
           (completion-ignore-case t))
      <span class="org-comment-delimiter">;; </span><span class="org-comment">input?</span>
      (<span class="org-keyword">if</span> (not (equal default group))
          (<span class="org-keyword">progn</span>
            (message-remove-header <span class="org-string">"Gcc"</span> t)
            (<span class="org-keyword">if</span> (not (equal delete group))
                (message-add-header (concat <span class="org-string">"Gcc: "</span> group)))))))

  (add-hook 'message-send-hook 'leuven-choose-gcc)
</pre>
</div>

<p>
I use it in such a way that, in all my IMAP mail groups, mails I write
automatically end up in the group I wrote from.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">  <span class="org-comment-delimiter">;; </span><span class="org-comment">Automatically mark Gcc articles (i.e., sent by myself) as read.</span>
  (<span class="org-keyword">setq</span> gnus-gcc-mark-as-read t)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd3764ce" class="outline-3">
<h3 id="orgd3764ce">Posting Styles</h3>
<div class="outline-text-3" id="text-orgd3764ce">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;;</span><span class="org-comment">** 5.6 (info "(gnus)Posting Styles")</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">An alternative to `</span><span class="org-comment"><span class="org-constant">gnus-posting-styles</span></span><span class="org-comment">', if you want to change accounts</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">on the fly while composing messages.</span>
  (autoload 'gnus-alias-determine-identity <span class="org-string">"gnus-alias"</span> nil t)
  (add-hook 'message-setup-hook 'gnus-alias-determine-identity)

  (<span class="org-keyword">with-eval-after-load</span> <span class="org-string">"gnus-alias"</span>

    <span class="org-comment-delimiter">;; </span><span class="org-comment">;; Add gnus-alias call to message mode hook.</span>
    <span class="org-comment-delimiter">;; </span><span class="org-comment">(gnus-alias-init)</span>

    <span class="org-comment-delimiter">;; </span><span class="org-comment">Added one key binding.</span>
    (define-key message-mode-map
      (kbd <span class="org-string">"C-c x"</span>) 'gnus-alias-select-identity)

    <span class="org-comment-delimiter">;; </span><span class="org-comment">set up my identities</span>
    (<span class="org-keyword">setq</span> gnus-alias-identity-alist
          '((<span class="org-string">"Work-ID"</span>
             nil                        <span class="org-comment-delimiter">; </span><span class="org-comment">Does not refer to any other identity.</span>
             <span class="org-string">"John Doe <a href="mailto:j.doe%40example.com">&lt;j.doe@example.com&gt;</a>"</span> <span class="org-comment-delimiter">; </span><span class="org-comment">Sender address.</span>
             <span class="org-string">"Example Corp."</span>            <span class="org-comment-delimiter">; </span><span class="org-comment">Organization header.</span>
             ((<span class="org-string">"X-Url"</span> . <span class="org-string">"http://www.example.com/~john"</span>)) <span class="org-comment-delimiter">; </span><span class="org-comment">Extra headers.</span>
             nil                        <span class="org-comment-delimiter">; </span><span class="org-comment">No extra body text.</span>
             <span class="org-string">"John Doe"</span>)                <span class="org-comment-delimiter">; </span><span class="org-comment">Signature.</span>

            (<span class="org-string">"Home-ID"</span>
             <span class="org-string">""</span>
             <span class="org-string">"Jane Doe <a href="mailto:john.doe%40example.net">&lt;john.doe@example.net&gt;</a>"</span>
             <span class="org-string">"Jane Doe"</span>
             ((<span class="org-string">"X-Url"</span> . <span class="org-string">"Under construction..."</span>))
             <span class="org-string">"\nBest regards,\n  John\n"</span>
             <span class="org-string">"John"</span>)))

    <span class="org-comment-delimiter">;; </span><span class="org-comment">Automatically choose an identity given the message context.</span>
    (<span class="org-keyword">setq</span> gnus-alias-identity-rules
          '((<span class="org-string">"Newsgroups-Rule"</span>
             (<span class="org-string">"newsgroups"</span> <span class="org-string">".*"</span> current)
             <span class="org-string">"Work-ID"</span>)

            (<span class="org-string">"Work-Rule"</span>
             (<span class="org-string">"any"</span> <span class="org-string">"j.doe@example.com"</span> both)
             <span class="org-string">"Work-ID"</span>)

            (<span class="org-string">"Home-Rule"</span>
             (<span class="org-string">"any"</span> <span class="org-string">"john.doe@example.net"</span> both)
             <span class="org-string">"Home-ID"</span>)))

    <span class="org-comment-delimiter">;; </span><span class="org-comment">Identity to use when gnus-alias finds an unknown identity.</span>
    (<span class="org-keyword">setq</span> gnus-alias-unknown-identity-rule 'error)

    <span class="org-comment-delimiter">;; </span><span class="org-comment">;; Default identity (when it isn't able to determine which identity to</span>
    <span class="org-comment-delimiter">;; </span><span class="org-comment">;; use).</span>
    <span class="org-comment-delimiter">;; </span><span class="org-comment">(setq gnus-alias-default-identity "Work-ID")</span>

    <span class="org-comment-delimiter">;; </span><span class="org-comment">Old identity is completely removed before the new one is added.</span>
    (<span class="org-keyword">setq</span> gnus-alias-overlay-identities nil)

    <span class="org-comment-delimiter">;; </span><span class="org-comment">Allow your `</span><span class="org-comment"><span class="org-constant">Return-Path</span></span><span class="org-comment">' to be set properly.</span>
    (<span class="org-keyword">setq</span> gnus-alias-override-user-mail-address t)

    <span class="org-comment-delimiter">;; </span><span class="org-comment">After an Identity is used, where should point be moved to?</span>
    (<span class="org-keyword">setq</span> gnus-alias-point-position 'start-of-sig)

    <span class="org-comment-delimiter">;; </span><span class="org-comment">`</span><span class="org-comment"><span class="org-constant">From</span></span><span class="org-comment">' header becomes a button that you can click on.</span>
    (<span class="org-keyword">setq</span> gnus-alias-use-buttonized-from t)

    <span class="org-comment-delimiter">;; </span><span class="org-comment">Level of verbosity -- message output only (see `*gnus-alias debug*'</span>
    <span class="org-comment-delimiter">;; </span><span class="org-comment">buffer, when maximum verbosity).</span>
    (<span class="org-keyword">setq</span> gnus-alias-verbosity 1)

    <span class="org-comment-delimiter">;; </span><span class="org-comment">Set message envelope to content of `</span><span class="org-comment"><span class="org-constant">From</span></span><span class="org-comment">'.</span>
    <span class="org-comment-delimiter">;; </span><span class="org-comment">XXX see `</span><span class="org-comment"><span class="org-constant">mail-specify-envelope-from</span></span><span class="org-comment">'</span>
    (<span class="org-keyword">defun</span> <span class="org-function-name">leuven-set-msg-envelope-from</span>()
      <span class="org-doc">"Set `</span><span class="org-doc"><span class="org-constant">mail-envelope-from</span></span><span class="org-doc">' to the value in the \"From\" field."</span>
      (<span class="org-keyword">let*</span> ((from (message-fetch-field <span class="org-string">"From"</span> t))
             (first (1+ (string-match <span class="org-string">"&lt;"</span> from)))
             (last (string-match <span class="org-string">"&gt;"</span> from)))
        (<span class="org-keyword">setq</span> mail-envelope-from (substring from first last))))

    <span class="org-comment-delimiter">;; </span><span class="org-comment">;; Alternative for FPZ??</span>
    <span class="org-comment-delimiter">;; </span><span class="org-comment">(defun leuven-set-msg-envelope-from ()</span>
    <span class="org-comment-delimiter">;;   </span><span class="org-comment">(let ((from (cadr</span>
    <span class="org-comment-delimiter">;;                </span><span class="org-comment">(mail-extract-address-components</span>
    <span class="org-comment-delimiter">;;                 </span><span class="org-comment">(message-field-value "from")))))</span>
    <span class="org-comment-delimiter">;;       </span><span class="org-comment">(setq mail-envelope-from from)))</span>

    (add-hook 'message-setup-hook 'leuven-set-msg-envelope-from)
    )
</pre>
</div>
</div>

<div id="outline-container-org339fc02" class="outline-4">
<h4 id="org339fc02">Multiple servers</h4>
<div class="outline-text-4" id="text-org339fc02">
<p>
Let Gnus decide which SMTP server should be used for sending email&#x2026;
</p>

<div class="note">
<p>
See <a href="http://www.emacswiki.org/emacs/MultipleSMTPAccounts">http://www.emacswiki.org/emacs/MultipleSMTPAccounts</a> for looking at the <code>From:</code>
header line of the current post.
</p>

</div>
</div>
</div>

<div id="outline-container-orgeb70bf0" class="outline-4">
<h4 id="orgeb70bf0">Headers</h4>
<div class="outline-text-4" id="text-orgeb70bf0">
<div class="org-src-container">
<pre class="src src-emacs-lisp">  <span class="org-comment-delimiter">;; </span><span class="org-comment">Add certain headers before sending messages.</span>
  (<span class="org-keyword">defun</span> <span class="org-function-name">leuven-message-add-content</span> ()
    <span class="org-comment-delimiter">;; </span><span class="org-comment">For Gmane address obfuscation.</span>
    (message-add-header <span class="org-string">"X-Archive: encrypt"</span>))

  (add-hook 'message-send-hook 'leuven-message-add-content)
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">  (message <span class="org-string">"5 Composing Messages... Done"</span>)
</pre>
</div>
</div>
</div>
</div>
</div>

<div id="outline-container-orgd4d3283" class="outline-2">
<h2 id="orgd4d3283">Message</h2>
<div class="outline-text-2" id="text-orgd4d3283">
<p>
Message mode has become the default mail editing mode in Emacs 23.2+ (used by
Gnus and RMail, at least).
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;;</span><span class="org-comment">* (info "(message)Top")</span>

  (message <span class="org-string">"Message..."</span>)
</pre>
</div>
</div>

<div id="outline-container-orgaf0b7e0" class="outline-3">
<h3 id="orgaf0b7e0">Interface</h3>
<div class="outline-text-3" id="text-orgaf0b7e0">
<p class="verse">
&gt; Is there a way to configure multiple addresses?<br />
<br />
Yes. There are a couple of variables for that. I use a code piece like the one<br />
below to set the variables.<br />
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">  (<span class="org-keyword">let</span> ((addr '(<span class="org-string">"primary.address@somewhere.invalid"</span>
                <span class="org-string">"another.address@isp.invalid"</span>
                <span class="org-string">"yet.another@address.invalid"</span>)))

    (<span class="org-keyword">setq-default</span>
     user-mail-address (car addr)
     message-alternative-emails (regexp-opt (cdr addr) 'words)
     message-dont-reply-to-names (regexp-opt addr 'words)
     gnus-ignored-from-addresses message-dont-reply-to-names))
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;;</span><span class="org-comment">** 1 (info "(message)Interface")</span>

<span class="org-comment-delimiter">;;</span><span class="org-comment">*** 1.1 (info "(message)New Mail Message")</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Prepare a mail from the current buffer.</span>
  (<span class="org-keyword">defun</span> <span class="org-function-name">leuven-mail-current-region-or-buffer</span> ()
    <span class="org-doc">"Insert the current region or buffer into an email sending buffer."</span>
    (<span class="org-keyword">interactive</span>)
    (<span class="org-keyword">save-excursion</span>
      (<span class="org-keyword">if</span> (use-region-p)
          (kill-ring-save (region-beginning) (region-end))
        (kill-ring-save (point-min) (point-max)))
      (mail)
      (end-of-buffer)
      (yank)                            <span class="org-comment-delimiter">; </span><span class="org-comment">insert text</span>
      (beginning-of-buffer)
      (next-line)
      (end-of-line)))

<span class="org-comment-delimiter">;;</span><span class="org-comment">*** 1.4 (info "(message)Wide Reply")</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Addresses to prune (disable `</span><span class="org-comment"><span class="org-constant">Cc:</span></span><span class="org-comment">' to myself) when doing wide replies.</span>
  (<span class="org-keyword">with-eval-after-load</span> <span class="org-string">"message"</span>
    (<span class="org-keyword">when</span> (boundp 'gnus-ignored-from-addresses)
      (<span class="org-keyword">setq</span> message-dont-reply-to-names gnus-ignored-from-addresses)))

<span class="org-comment-delimiter">;;</span><span class="org-comment">*** 1.8 (info "(message)Forwarding")</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">;; Delimiter inserted before forwarded messages.</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">(setq message-forward-start-separator "-----Original Message-----\n")</span>
  <span class="org-comment-delimiter">;;</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">;; Delimiter inserted after forwarded messages.</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">(setq message-forward-end-separator "\n")</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">When forwarding mail, chop off these headers.</span>
  (<span class="org-keyword">setq</span> message-forward-ignored-headers
        (concat <span class="org-string">"^</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(</span></span><span class="org-string">"</span>
                <span class="org-comment-delimiter">;; </span><span class="org-comment">FIXME Rewrite the following in a shorter way.</span>
                <span class="org-comment-delimiter">;; </span><span class="org-comment">(mapconcat 'regexp-quote</span>
                <span class="org-comment-delimiter">;;            </span><span class="org-comment">'("Content-Class" "Content-language" "DKIM-Signature"</span>
                <span class="org-comment-delimiter">;;              </span><span class="org-comment">"Delivered-To" "Disposition-Notification-To")</span>
                <span class="org-comment-delimiter">;;            </span><span class="org-comment">"\\|")</span>

                <span class="org-string">"Approved</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">Archived-At</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">Authentication-Results</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">"</span>
                <span class="org-string">"Accept-Language</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">acceptlanguage</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">Auto-Submitted</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">"</span>
                <span class="org-string">"BCc</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">"</span>
                <span class="org-string">"Cancel-Lock</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">Content-Class</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">Content-language</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">"</span>
                <span class="org-string">"DKIM-Signature</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">Delivered-To</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">Delivery-date</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">"</span>
                <span class="org-string">"Disposition-Notification-To</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">DomainKey-Signature</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">"</span>
                <span class="org-string">"Envelope-to</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">Errors-To</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">"</span>
                <span class="org-string">"Face</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">"</span>
                <span class="org-string">"Importance</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">In-Reply-To</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">"</span>
                <span class="org-string">"Lines</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">List-.*</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">"</span>
                <span class="org-string">"Message-Id</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">"</span>
                <span class="org-string">"NNTP-Posting-Date</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">NNTP-Posting-Host</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">"</span>
                <span class="org-string">"Organization</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">Original-.*</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">"</span>
                <span class="org-string">"Path</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">Precedence</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">Priority</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">"</span>
                <span class="org-string">"Received-SPF</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">Received</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">References</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">Reply-To</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">"</span>
                <span class="org-string">"Return-Path</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">Return-Receipt-To</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">"</span>
                <span class="org-string">"Sender</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">Sensitivity</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">spamdiagnosticoutput</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">"</span>
                <span class="org-string">"spamdiagnosticmetadata</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">"</span>
                <span class="org-string">"Thread-Index</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">Thread-Topic</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">"</span>
                <span class="org-string">"User-Agent</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">"</span>
                <span class="org-string">"X.*"</span>
                <span class="org-string">"</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string">:"</span>))

  <span class="org-comment-delimiter">;; </span><span class="org-comment">subject of article with `</span><span class="org-comment"><span class="org-constant">Fwd:</span></span><span class="org-comment">' prepended to it, for forwarded messages</span>
  (<span class="org-keyword">setq</span> message-make-forward-subject-function
        'message-forward-subject-fwd)

  <span class="org-comment-delimiter">;; </span><span class="org-comment">forwarded messages will just be copied inline to the new message</span>
  (<span class="org-keyword">setq</span> message-forward-as-mime nil)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd2032cb" class="outline-3">
<h3 id="orgd2032cb">Commands</h3>
<div class="outline-text-3" id="text-orgd2032cb">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;;</span><span class="org-comment">** 2 (info "(message)Commands")</span>

<span class="org-comment-delimiter">;;</span><span class="org-comment">*** 2.4 (info "(message)Insertion")</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Name of file containing the signature.</span>
  (<span class="org-keyword">setq</span> message-signature-file <span class="org-string">"~/Mail/signatures/johndoe"</span>)
                                        <span class="org-comment-delimiter">; </span><span class="org-comment">this file must exist (otherwise, you</span>
                                        <span class="org-comment-delimiter">; </span><span class="org-comment">get misplaced headers when switching</span>
                                        <span class="org-comment-delimiter">; </span><span class="org-comment">between personalities (see</span>
                                        <span class="org-comment-delimiter">; </span><span class="org-comment">`</span><span class="org-comment"><span class="org-constant">gnus-alias</span></span><span class="org-comment">')</span>
</pre>
</div>

<p>
XXX Look at Gnushush to automatically <b>obfuscate email</b>, Message-ID, etc.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;;</span><span class="org-comment">*** 2.11 (info "(message)Spelling")</span>

 (add-hook 'message-setup-hook          <span class="org-comment-delimiter">; </span><span class="org-comment">or message-mode-hook?</span>
           #'(lambda ()
             (flyspell-mode 1)))
</pre>
</div>
</div>
</div>

<div id="outline-container-org0f31a93" class="outline-3">
<h3 id="org0f31a93">Variables</h3>
<div class="outline-text-3" id="text-org0f31a93">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;;</span><span class="org-comment">** 3 (info "(message)Variables")</span>

<span class="org-comment-delimiter">;;</span><span class="org-comment">*** 3.1 (info "(message)Message Headers")</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Specify how `</span><span class="org-comment"><span class="org-constant">From</span></span><span class="org-comment">' headers should look.</span>
  (<span class="org-keyword">setq</span> message-from-style 'angles)
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;;</span><span class="org-comment">*** 3.3 (info "(message)Mail Variables")</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Sending mail -- for Gnus (for `</span><span class="org-comment"><span class="org-constant">message</span></span><span class="org-comment">').</span>
  (<span class="org-keyword">setq</span> message-send-mail-function 'message-smtpmail-send-it)

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Limit on the size of messages sent (10 MB).</span>
  (<span class="org-keyword">setq</span> message-send-mail-partially-limit (* 10 1000 1024))
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;;</span><span class="org-comment">*** 3.4 (info "(message)News Headers")</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Masquerade domain part of Message-ID.</span>
  (<span class="org-keyword">setq</span> message-user-fqdn <span class="org-string">"example.com"</span>) <span class="org-comment-delimiter">; </span><span class="org-comment">(downcase (system-name))</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;;</span><span class="org-comment">*** 3.6 (info "(message)Insertion Variables")</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Strip off the signature when citing the original message.</span>
  (<span class="org-keyword">setq</span> message-cite-function 'message-cite-original-without-signature)
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">  (<span class="org-keyword">defun</span> <span class="org-function-name">message-insert-citation-line</span> ()
    <span class="org-doc">"A replacement of the original `</span><span class="org-doc"><span class="org-constant">message-insert-citation-line</span></span><span class="org-doc">'."</span>
    (<span class="org-keyword">let</span> ((from (replace-regexp-in-string
                 <span class="org-string">"[()]</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string"> ?[</span><span class="org-string"><span class="org-negation-char">^</span></span><span class="org-string"> ]*?@[</span><span class="org-string"><span class="org-negation-char">^</span></span><span class="org-string"> ]* ?"</span> <span class="org-string">""</span>
                 (<span class="org-keyword">mail-header-from</span> message-reply-headers))))
      (insert from <span class="org-string">" wrote:\n"</span>)))
</pre>
</div>

<div class="inlinetask">
<b><span class="todo TODO">TODO</span> Insert a citation line in the correct language</b><br />
<p>
See <a href="http://www.emacswiki.org/emacs/AutoDictionaryMode">http://www.emacswiki.org/emacs/AutoDictionaryMode</a>.
</p>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;;</span><span class="org-comment">*** 3.7 (info "(message)Various Message Variables")</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">;; Directory from which all other mail file variables are derived.</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">(setq message-directory "~/Mail/")</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Remove the binding of `C-c C-v', used by Org-Babel commands.</span>
  (add-hook 'message-mode-hook
            #'(lambda ()
              (define-key message-mode-map
                (kbd <span class="org-string">"C-c C-v"</span>) nil)))

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Operate on messages you compose.</span>
  (<span class="org-keyword">defun</span> <span class="org-function-name">leuven--message-mode-hook</span> ()
    <span class="org-doc">"Enable Org minor modes and auto-fill."</span>

    <span class="org-comment-delimiter">;; </span><span class="org-comment">Tab completion for alias in `</span><span class="org-comment"><span class="org-constant">.mailrc</span></span><span class="org-comment">'.</span>
    (local-set-key (kbd <span class="org-string">"&lt;M-tab&gt;"</span>) 'mail-abbrev-complete-alias)

    <span class="org-comment-delimiter">;; </span><span class="org-comment">Enable automatic word-wrap when composing messages.</span>
    (<span class="org-keyword">setq-default</span> fill-column 80)
    (auto-fill-mode)

    <span class="org-comment-delimiter">;; </span><span class="org-comment">Turn on the Org mode table editor (in emails).</span>
    (turn-on-orgtbl)

    <span class="org-comment-delimiter">;; </span><span class="org-comment">;; Turn on (the enhanced version of) orgstruct-mode.</span>
    <span class="org-comment-delimiter">;; </span><span class="org-comment">(when (fboundp 'turn-on-orgstruct++)</span>
    <span class="org-comment-delimiter">;;   </span><span class="org-comment">(turn-on-orgstruct++))</span>

    (<span class="org-keyword">when</span> (try-require 'org-footnote)
      <span class="org-comment-delimiter">;; </span><span class="org-comment">Default style used for footnoting is local to the Message being</span>
      <span class="org-comment-delimiter">;; </span><span class="org-comment">written.</span>
      (set (make-local-variable 'org-footnote-auto-label) 'plain)

      <span class="org-comment-delimiter">;; </span><span class="org-comment">No tag marking the beginning of footnote section.</span>
      (set (make-local-variable
            'org-footnote-tag-for-non-org-mode-files) <span class="org-warning">nil)))</span>

    (add-hook 'message-mode-hook 'leuven--message-mode-hook 'append)

<span class="org-comment-delimiter">;;</span><span class="org-comment">*** 3.9 (info "(message)Message Buffers")</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Kill message buffer after sending a message.</span>
  (<span class="org-keyword">setq</span> message-kill-buffer-on-exit t)

  (message <span class="org-string">"Message... Done"</span>)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org63487a8" class="outline-2">
<h2 id="org63487a8">Select Methods</h2>
<div class="outline-text-2" id="text-org63487a8">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;;</span><span class="org-comment">* 6 (info "(gnus)Select Methods")</span>

  (message <span class="org-string">"6 Select Methods..."</span>)
</pre>
</div>
</div>

<div id="outline-container-org47eec93" class="outline-3">
<h3 id="org47eec93">Getting News</h3>
<div class="outline-text-3" id="text-org47eec93">
<p>
Newsgroups in which I&rsquo;m interested:
</p>

<ul class="org-ul">
<li><code>nntp+gmane:gmane.emacs.orgmode</code></li>
<li><code>nntp+gmane:gwene.org.org-mode.git</code></li>
<li><code>nntp+gmane:gwene.com.stackoverflow.feeds.tag.org-mode</code></li>
<li><code>nntp+gmane:gwene.com.stackexchange.emacs.feeds.tag.tagnames.org-mode</code></li>
<li><code>nntp+eternal-september:gnu.emacs.help</code></li>
<li><code>nntp+eternal-september:gnu.emacs.bug</code></li>
<li><code>nntp+eternal-september:gnu.emacs.gnus</code></li>
<li><code>nntp+gmane:gmane.os.cygwin</code></li>
<li><code>nntp+gmane:gmane.emacs.ess.general</code></li>
<li><code>nntp+gmane:gmane.comp.finance.ledger.general</code></li>
</ul>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;;</span><span class="org-comment">** 6.2 (info "(gnus)Getting News")</span>

<span class="org-comment-delimiter">;;</span><span class="org-comment">*** 6.2.1 (info "(gnus)NNTP")</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Required when posting to an authenticated news server.</span>
  (add-hook 'nntp-server-opened-hook 'nntp-send-authinfo)

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Number of seconds to wait before an nntp connection times out.</span>
  (<span class="org-keyword">setq</span> nntp-connection-timeout 5)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb50cdfe" class="outline-3">
<h3 id="orgb50cdfe">Using IMAP</h3>
<div class="outline-text-3" id="text-orgb50cdfe">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;;</span><span class="org-comment">** 6.3 (info "(gnus)Using IMAP")</span>
</pre>
</div>
</div>

<div id="outline-container-org039a5df" class="outline-4">
<h4 id="org039a5df">Customizing the IMAP Connection</h4>
<div class="outline-text-4" id="text-org039a5df">
<div class="org-src-container">
<pre class="src src-emacs-lisp">  <span class="org-comment-delimiter">;; </span><span class="org-comment">Log commands (imap session trace) to the `*imap log*' buffer.</span>
  (<span class="org-keyword">setq</span> nnimap-record-commands t)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org21ce1fb" class="outline-3">
<h3 id="org21ce1fb">Getting Mail</h3>
<div class="outline-text-3" id="text-org21ce1fb">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;;</span><span class="org-comment">** 6.4 (info "(gnus)Getting Mail")</span>
</pre>
</div>
</div>

<div id="outline-container-orgf646a6e" class="outline-4">
<h4 id="orgf646a6e">Splitting Mail</h4>
<div class="outline-text-4" id="text-orgf646a6e">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;;</span><span class="org-comment">*** 6.4.3 (info "(gnus)Splitting Mail") (in IMAP)</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">The first match in `</span><span class="org-comment"><span class="org-constant">nnmail-split-rule</span></span><span class="org-comment">' found will be used.</span>
  (<span class="org-keyword">setq</span> nnmail-crosspost nil)
</pre>
</div>
</div>
</div>

<div id="outline-container-org115a0ad" class="outline-4">
<h4 id="org115a0ad">Fancy Mail Splitting</h4>
<div class="outline-text-4" id="text-org115a0ad">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;;</span><span class="org-comment">*** 6.4.6 (info "(gnus)Fancy Mail Splitting")</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Specify how to split mail.</span>
  (<span class="org-keyword">setq</span> nnmail-split-fancy
        '(|                             <span class="org-comment-delimiter">; </span><span class="org-comment">Split to the *first* match.</span>

            <span class="org-comment-delimiter">;; </span><span class="org-comment">(: nnmail-split-fancy-with-parent)</span>

            <span class="org-comment-delimiter">;; </span><span class="org-comment">Mailing lists (in To: or Cc:).</span>
            (to <span class="org-string">"foo@bar\\.com"</span> <span class="org-string">"list.foo"</span>)

            <span class="org-comment-delimiter">;; </span><span class="org-comment">Catch spam.</span>
            (<span class="org-string">"X-Spam-Status"</span> <span class="org-string">"[Yy]es"</span>
             <span class="org-string">"INBOX.Spam"</span>)

            <span class="org-comment-delimiter">;; </span><span class="org-comment">;; Unmatched mail goes to the catch-all group (default mailbox).</span>
            <span class="org-comment-delimiter">;; </span><span class="org-comment">"INBOX"</span>
            ))                          <span class="org-comment-delimiter">; </span><span class="org-comment">Undecided.</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;;</span><span class="org-comment">*** 6.4.9 (info "(gnus)Expiring Mail")</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">How can I purge a message from an IMAP server using Gnus?</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">IMAP calls it "Expunge" of deleted messages, Gnus calls it expiry of</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">expirable (marked 'E') messages..</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">groups in which to perform expiry of all read articles</span>
  (<span class="org-keyword">setq</span> gnus-total-expirable-newsgroups <span class="org-string">"\\`nnrss:"</span>)

  <span class="org-comment-delimiter">;; </span><span class="org-comment">;; Disable the expiry process started on leaving a group (for speed reason)</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">;; before you leave for lunch, `M-x gnus-group-expire-all-groups'.</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">(remove-hook 'gnus-summary-prepare-exit-hook</span>
  <span class="org-comment-delimiter">;;              </span><span class="org-comment">'gnus-summary-expire-articles)</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Make the `d' key mean `</span><span class="org-comment"><span class="org-constant">delete</span></span><span class="org-comment">' in mail groups, too (as in many other</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">modes), instead of `keep this message for archival purposes'.</span>
  (define-key gnus-summary-mode-map
    (kbd <span class="org-string">"d"</span>) 'gnus-summary-mark-as-expirable)

  <span class="org-comment-delimiter">;; </span><span class="org-comment">;; Email pre-expiry period according to group.</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">(setq nnmail-expiry-wait-function</span>
  <span class="org-comment-delimiter">;;       </span><span class="org-comment">#'(lambda (group)</span>
  <span class="org-comment-delimiter">;;         </span><span class="org-comment">(cond ((string= group "Gmail")      90)</span>
  <span class="org-comment-delimiter">;;               </span><span class="org-comment">((string= group "moley")      30)</span>
  <span class="org-comment-delimiter">;;               </span><span class="org-comment">((string= group "blackhole") 'immediate)</span>
  <span class="org-comment-delimiter">;;               </span><span class="org-comment">(t                            7))))</span>
  <span class="org-comment-delimiter">;;</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">;; Each time I quit the summary buffer of 'blackhole', any read mail</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">;; is immediately expired</span>


  <span class="org-comment-delimiter">;; </span><span class="org-comment">"deletion" versus "expiry"</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">;; Messages should be expired as soon as possible (when the mail group is</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">;; left).</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">(setq nnmail-expiry-wait 'immediate)</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">1) Only (*only*) articles that are marked as expirable are apt to be</span>
  <span class="org-comment-delimiter">;;    </span><span class="org-comment">expired. (Yes, *only* those. Yes.)</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">2) If you have made a group total-expirable, all read articles are</span>
  <span class="org-comment-delimiter">;;    </span><span class="org-comment">apt to be expired. (Yes, only the read articles. No, not the</span>
  <span class="org-comment-delimiter">;;    </span><span class="org-comment">unread, ticked and dormant articles. Only the read ones.)</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Delete, even in IMAP terms, means "I want this message to go</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">away soon."  IMAP has no equivalent to Gnus' expire mark, which means</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">"I want this message to go away after expiry-wait days."</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">When you `B DEL', the message dies immediately, now and forever.</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">There is no recovery.</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">This is "delete" as in "delete it from your disk forever and ever,</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">never to return again." Use with caution.</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">If you want something to be scheduled for death, then hit `E' to mark</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">a message as expirable. The default expiry interval is one week, at</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">which point it will be deleted automatically, as though you had hit</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">it then with `B DEL'. Then you have 7 days to undelete the messages.</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Many mailers have a concept of a "deleted items" folder but Gnus does</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">not have that.  It has expiry instead, so that articles due to</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">disappear will remain where they belong until their expiry interval</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">arrives.</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Deleting a message is normally done via marking as expirable: you hit</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">`E' (not `e') to mark a message as expirable, and whenever expiry is</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">run (normally when you `q'uit a summary buffer), the old E messages</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">are deleted (old == nnmail-expiry-wait days).</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">1. No expiry.  Only articles explicitly marked with 'E' from the</span>
  <span class="org-comment-delimiter">;;    </span><span class="org-comment">summary buffer are expired.  Reading articles marks them 'R'ead.</span>
  <span class="org-comment-delimiter">;;</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">2. Auto-expiry.  Only articles marked expirable are expired, but</span>
  <span class="org-comment-delimiter">;;    </span><span class="org-comment">reading articles marks them 'E'xpirable.</span>
  <span class="org-comment-delimiter">;;</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">3. Total-expiry.  Articles merely marked 'R'ead are expired, along</span>
  <span class="org-comment-delimiter">;;    </span><span class="org-comment">with articles explicitly marked 'E'xpirable.</span>
  <span class="org-comment-delimiter">;;</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">Assuming you read every article, auto- and total-expiry will</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">eventually expire them all at the same times. It's just a question as</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">to whether you'd prefer to mark articles as expirable or read when</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">you read them. I tend to use total-expiry for everything; it has</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">predictable behavior if I'm switching it on and off for a group, and</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">I understand better how it works with scoring.</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">delete the article when pressing `</span><span class="org-comment"><span class="org-constant">Delete</span></span><span class="org-comment">'</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">FIXME Does not work... This is the opposite of SPC (page down)!</span>
  (<span class="org-keyword">with-eval-after-load</span> <span class="org-string">"gnus-sum"</span> <span class="org-comment-delimiter">;; </span><span class="org-comment">be sure to override default</span>
    (<span class="org-keyword">gnus-define-keys</span> gnus-summary-mode-map
      [delete] gnus-summary-delete-article))
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;;</span><span class="org-comment">*** 6.4.11 (info "(gnus)Duplicates")</span>
</pre>
</div>

<p>
nnmail keeps a cache of  Message-IDs to discover mail duplicates.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">  <span class="org-comment-delimiter">;; </span><span class="org-comment">Cache of Message-IDs (for every message Gnus sees).</span>
  (<span class="org-keyword">setq</span> nnmail-message-id-cache-file
        (concat gnus-directory <span class="org-string">".nnmail-cache"</span>))

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Update the Message-ID cache when moving articles.</span>
  (<span class="org-keyword">setq</span> nnmail-cache-accepted-message-ids t)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org943422f" class="outline-3">
<h3 id="org943422f">Browsing the Web</h3>
<div class="outline-text-3" id="text-org943422f">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;;</span><span class="org-comment">** 6.5 (info "(gnus)Browsing the Web")</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Use `</span><span class="org-comment"><span class="org-constant">wget</span></span><span class="org-comment">' instead of `</span><span class="org-comment"><span class="org-constant">url.el</span></span><span class="org-comment">' (for nnweb-type google), cause it</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">seems to be more reliable (about how the HTML is fetched).</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Use external grab program (to fetch the RSS feed, etc.).</span>
  (<span class="org-keyword">setq</span> mm-url-use-external t)

  <span class="org-comment-delimiter">;; </span><span class="org-comment">URL grab program.</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">TODO Protect in case wget is not installed</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">(setq mm-url-program "wget") ; make sure you don't use the symbol 'wget</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">FYI, wget is run when a link from Org is not found, for example</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">because the mail has been moved from one group to another.</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Arguments for `</span><span class="org-comment"><span class="org-constant">mm-url-program</span></span><span class="org-comment">'.</span>
  (<span class="org-keyword">setq</span> mm-url-arguments '(<span class="org-string">"-q"</span> <span class="org-string">"-O"</span> <span class="org-string">"-"</span>))

  <span class="org-comment-delimiter">;; </span><span class="org-comment">How to find the parent article.</span>
  (<span class="org-keyword">when</span> (try-require 'nnweb-XXX)        <span class="org-comment-delimiter">; </span><span class="org-comment">not sure it really works!?</span>
    (<span class="org-keyword">setq</span> gnus-refer-article-method
          '(
            <span class="org-comment-delimiter">;; </span><span class="org-comment">First try the current method.</span>
            current

            <span class="org-comment-delimiter">;; </span><span class="org-comment">Find the Message-ID based on the registry, so that you can</span>
            <span class="org-comment-delimiter">;; </span><span class="org-comment">safely move articles around.</span>
            <span class="org-comment-delimiter">;; </span><span class="org-comment">(nnregistry)</span>

            (nnweb <span class="org-string">"gmane"</span> (nnweb-type gmane))

            <span class="org-comment-delimiter">;; </span><span class="org-comment">Then ask Google.</span>
            (nnweb <span class="org-string">"google"</span> (nnweb-type google))

            <span class="org-comment-delimiter">;; </span><span class="org-comment">And finally ask `</span><span class="org-comment"><span class="org-constant">news.gmane.org</span></span><span class="org-comment">' if that fails.</span>
            (nntp <span class="org-string">"news.gmane.org"</span>)
            )))
</pre>
</div>
</div>
</div>

<div id="outline-container-org32bd7f0" class="outline-3">
<h3 id="org32bd7f0">Gnus Unplugged</h3>
<div class="outline-text-3" id="text-org32bd7f0">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;;</span><span class="org-comment">** 6.9 (info "(gnus)Gnus Unplugged")</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Disable the Gnus agent (used for "offline" reading).</span>
  (<span class="org-keyword">setq</span> gnus-agent nil)                 <span class="org-comment-delimiter">; </span><span class="org-comment">Prevent being unable to delete some</span>
                                        <span class="org-comment-delimiter">; </span><span class="org-comment">mails from your inbox.</span>

  (message <span class="org-string">"6 Select Methods... Done"</span>)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org6d307ab" class="outline-2">
<h2 id="org6d307ab">Scoring</h2>
<div class="outline-text-2" id="text-org6d307ab">
<p>
You can <i>increase</i> or <i>lower</i> the score, respectively, in the global file (instead
of the score file local for the group) by pressing <code>M-i a I</code> or <code>M-i a L</code>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;;</span><span class="org-comment">* 7 (info "(gnus)Scoring")</span>

  (message <span class="org-string">"7 Scoring..."</span>)

  <span class="org-comment-delimiter">;; </span><span class="org-comment">;; Directory where kill and score files will be stored.</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">(setq gnus-kill-files-directory "~/")</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">;; Increase score of messages that are replies to my own postings.</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">;; TODO only for newsgroups (and not for mails)!</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">(add-hook 'message-sent-hook 'gnus-score-followup-article)</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">(add-hook 'message-sent-hook 'gnus-score-followup-thread) ; Cool trick.</span>

  (message <span class="org-string">"7 Scoring... Done"</span>)
</pre>
</div>
</div>

<div id="outline-container-org06b401d" class="outline-3">
<h3 id="org06b401d">From Sacha Chua</h3>
<div class="outline-text-3" id="text-org06b401d">
<p>
Adaptive scoring means that if you kill a thread you&rsquo;re not particularly
interested in, it lowers the score on that one, so any replies are shown with
a negative score. You can also configure it to hide messages with scores below
a certain threshold, so you don&rsquo;t even see replies.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">  (<span class="org-keyword">setq</span> gnus-use-adaptive-scoring t)

  (<span class="org-keyword">setq</span> gnus-default-adaptive-score-alist
        '((gnus-unread-mark)
          (gnus-ticked-mark (subject 10))
          (gnus-killed-mark (subject -5))
          (gnus-catchup-mark (subject -1))))
</pre>
</div>

<p>
I also have some more rules that score things up if they mention my name or
other things I&rsquo;m interested in.
</p>

<p>
Maybe a score file with this in it?
</p>

<pre class="example">
(("Body" ("sacha" 10 nil s)))
</pre>


<p>
which theoretically adds a score based on that keyword, but I haven&rsquo;t tested it
and it slows loading groups down a bit.
</p>
</div>
</div>
</div>

<div id="outline-container-orgf2e1b8f" class="outline-2">
<h2 id="orgf2e1b8f">Searching</h2>
<div class="outline-text-2" id="text-orgf2e1b8f">
<p>
Basically, there&rsquo;s only one user-frontend function: <code>gnus-group-make-nnir-group</code>
bound to <code>G G</code> in <code>*Group*</code>.
</p>

<p>
It comes with Gnus.  You don&rsquo;t even need to configure anything for searching
<b>IMAP</b> and <b>Gmane</b> groups.
</p>
</div>
</div>

<div id="outline-container-orgedf428c" class="outline-2">
<h2 id="orgedf428c">Various</h2>
<div class="outline-text-2" id="text-orgedf428c">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;;</span><span class="org-comment">* 9 (info "(gnus)Various")</span>

  (message <span class="org-string">"9 Various..."</span>)
</pre>
</div>
</div>

<div id="outline-container-orgbe08f47" class="outline-3">
<h3 id="orgbe08f47">Interactive</h3>
<div class="outline-text-3" id="text-orgbe08f47">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;;</span><span class="org-comment">** 9.2 (info "(gnus)Interactive")</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Don't display verbose messages and don't require confirmations.</span>
  (<span class="org-keyword">setq</span> gnus-novice-user nil)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgac9ad21" class="outline-3">
<h3 id="orgac9ad21">Formatting Variables</h3>
<div class="outline-text-3" id="text-orgac9ad21">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;;</span><span class="org-comment">** 9.4 (info "(gnus)Formatting Variables")</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Assume that fixed width fonts have characters of the same width.</span>
  (<span class="org-keyword">setq</span> gnus-use-correct-string-widths nil)
</pre>
</div>
</div>
</div>

<div id="outline-container-org953cdcb" class="outline-3">
<h3 id="org953cdcb">Window Layout</h3>
<div class="outline-text-3" id="text-org953cdcb">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;;</span><span class="org-comment">** 9.5 (info "(gnus)Window Layout")</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Add a window configuration to `</span><span class="org-comment"><span class="org-constant">gnus-buffer-configuration</span></span><span class="org-comment">'.</span>
  (<span class="org-keyword">if</span> (&gt; (frame-width) 160)
      (gnus-add-configuration
       '(article
         (horizontal 1.0
                     (summary 0.50 point)
                     <span class="org-comment-delimiter">;; </span><span class="org-comment">`</span><span class="org-comment"><span class="org-constant">point</span></span><span class="org-comment">' positions the cursor properly.</span>
                     (article 1.0))))
    (gnus-add-configuration
     '(article
       (vertical 1.0
                 (summary 0.40 point)
                 (article 1.0)))))
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(gnus-add-configuration
 '(article
   (horizontal 1.0
               (vertical 60 (group 1.0))
               (vertical 1.0
                         (summary 0.40 point)
                         (article 1.0)))))

(gnus-add-configuration
 '(summary
   (horizontal 1.0
               (vertical 60 (group 1.0))
               (vertical 1.0 (summary 1.0 point)))))
</pre>
</div>
</div>
</div>

<div id="outline-container-org0a90063" class="outline-3">
<h3 id="org0a90063">The Gnus Registry</h3>
<div class="outline-text-3" id="text-org0a90063">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;;</span><span class="org-comment">** 9.18 (info "(gnus)The Gnus Registry")</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">The registry should be installed.</span>
  (<span class="org-keyword">setq</span> gnus-registry-install t)        <span class="org-comment-delimiter">; </span><span class="org-comment">For `G G' searches???</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Article registry for Gnus.</span>
  (<span class="org-keyword">when</span> (try-require 'gnus-registry-XXX)

    <span class="org-comment-delimiter">;; </span><span class="org-comment">Enable the various registry functions.</span>
    (gnus-registry-initialize))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgfe36e99" class="outline-3">
<h3 id="orgfe36e99">Interaction with other modes</h3>
<div class="outline-text-3" id="text-orgfe36e99">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;;</span><span class="org-comment">** 9.19 Interaction with (info "(gnus)Other modes")</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Attach all marked files from Dired to a new Gnus message.</span>
  (autoload 'gnus-dired-mode <span class="org-string">"gnus-dired"</span>
    <span class="org-doc">"Attach dired's marked files to a gnus message composition."</span> t)

  (autoload 'gnus-dired-attach <span class="org-string">"gnus-dired"</span>
    <span class="org-doc">"Attach dired's marked files to a gnus message composition."</span> t)

  (<span class="org-keyword">with-eval-after-load</span> <span class="org-string">"dired"</span>

    (add-hook 'dired-mode-hook 'gnus-dired-mode)

    (define-key dired-mode-map
      (kbd <span class="org-string">"a"</span>) 'gnus-dired-attach))    <span class="org-comment-delimiter">; </span><span class="org-comment">XXX conflict with</span>
                                        <span class="org-comment-delimiter">; </span><span class="org-comment">`</span><span class="org-comment"><span class="org-constant">dired-find-alternate-file</span></span><span class="org-comment">'</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd373c5f" class="outline-3">
<h3 id="orgd373c5f">Various Various</h3>
<div class="outline-text-3" id="text-orgd373c5f">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;;</span><span class="org-comment">** 9.20 (info "(gnus)Various Various")</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Display more messages from Gnus.</span>
  (<span class="org-keyword">setq</span> gnus-verbose 10)                <span class="org-comment-delimiter">; </span><span class="org-comment">9 = minimum for helpful debugging.</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Display more messages from the Gnus back-ends.</span>
  (<span class="org-keyword">setq</span> gnus-verbose-backends 10)

  (message <span class="org-string">"9 Various... Done"</span>)
</pre>
</div>
</div>
</div>

<div id="outline-container-org218a0ea" class="outline-3">
<h3 id="org218a0ea">Missing packages</h3>
<div class="outline-text-3" id="text-org218a0ea">
<div class="org-src-container">
<pre class="src src-emacs-lisp">  <span class="org-comment-delimiter">;; </span><span class="org-comment">Warn that some packages were missing.</span>
  (<span class="org-keyword">dolist</span> (pkg leuven--missing-packages)
    (message <span class="org-string">"WARN- Package `</span><span class="org-string"><span class="org-constant">%s</span></span><span class="org-string">' not found"</span> pkg))

  (message <span class="org-string">"\n"</span>)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgb6d2f78" class="outline-2">
<h2 id="orgb6d2f78">File Local Variables</h2>
<div class="outline-text-2" id="text-orgb6d2f78">
</div>
<div id="outline-container-org278c0c6" class="outline-3">
<h3 id="org278c0c6">Feature</h3>
<div class="outline-text-3" id="text-org278c0c6">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span class="org-keyword">provide</span> '<span class="org-constant">gnus-leuven</span>)
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;; </span><span class="org-comment">This is for the sake of Emacs.</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">Local Variables&#58;</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">coding: utf-8-unix</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">eval: (when (require 'rainbow-mode nil t) (rainbow-mode))</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">flycheck-emacs-lisp-initialize-packages: t</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">flycheck-mode: nil</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">ispell-local-dictionary: "american"</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">End:</span>

<span class="org-comment-delimiter">;;; </span><span class="org-comment">gnus-leuven.el ends here</span>
</pre>
</div>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: Fabrice Niessen</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
