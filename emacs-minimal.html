<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Minimal .emacs</title>
<meta name="generator" content="Org-mode" />
<meta name="author" content="Fabrice Niessen" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  pre.src-sh:before    { content: 'sh'; }
  pre.src-bash:before  { content: 'sh'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-R:before     { content: 'R'; }
  pre.src-perl:before  { content: 'Perl'; }
  pre.src-java:before  { content: 'Java'; }
  pre.src-sql:before   { content: 'SQL'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="file:///D:/Users/fni/src/org-html-themes/styles/readtheorg/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="file:///D:/Users/fni/src/org-html-themes/styles/readtheorg/css/readtheorg.css"/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script type="text/javascript" src="file:///D:/Users/fni/src/org-html-themes/styles/lib/js/jquery.stickytableheaders.min.js"></script>
<script type="text/javascript" src="file:///D:/Users/fni/src/org-html-themes/styles/readtheorg/js/readtheorg.js"></script>
</head>
<body>
<div id="content">
<h1 class="title">Minimal .emacs</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgb6e6c6e">Example</a>
<ul>
<li><a href="#org6fff5ea">Header</a></li>
<li><a href="#org6b5cad5">Constant part</a></li>
<li><a href="#orgafd5495">Variable part</a>
<ul>
<li><a href="#org4da89dc">Sandbox</a></li>
<li><a href="#org67cfc12">Test if function is defined</a></li>
<li><a href="#orgcfdbc6c">Eval-after-load eval&rsquo;ed twice</a>
<ul>
<li><a href="#orgf379275">Minimal display</a></li>
<li><a href="#org4c7c585">Backtraces</a></li>
</ul>
</li>
<li><a href="#orgb840427">Test export to HTML</a></li>
<li><a href="#orgfb046f4">Org-test</a>
<ul>
<li><a href="#org8559ee9">Create a new test case</a></li>
<li><a href="#org5e3cf01">Run an existing test</a></li>
</ul>
</li>
<li><a href="#orgc015cbd">ELP</a></li>
</ul>
</li>
<li><a href="#org3199ce8">Footer</a></li>
</ul>
</li>
<li><a href="#org163dba">One-liners</a>
<ul>
<li><a href="#orgfcc6593">ELP</a></li>
</ul>
</li>
<li><a href="#org398a786">Script</a>
<ul>
<li><a href="#org2254fca">From the man page</a></li>
<li><a href="#orgbc5c4c3">Ideal</a></li>
<li><a href="#org358024b">emacs-helm.sh (from Thierry Volpiatto)</a></li>
<li><a href="#org875c651">Code</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-orgb6e6c6e" class="outline-2">
<h2 id="orgb6e6c6e">Example</h2>
<div class="outline-text-2" id="text-orgb6e6c6e">
<p>
The usual method to find a problem while avoiding to disturb a running Emacs
instance is to run a separate Emacs in batch mode: that will avoid any
conflicts with the running instance.
</p>

<p>
But <code>batch</code> implies <code>-q</code>, so you will have to provide a minimal <code>.emacs</code> file that
sets up enough structure to enable you to do what you want, <b>without any of
your customizations</b>.
</p>

<p>
Here is such a minimal Emacs config file.
</p>
</div>

<div id="outline-container-org6fff5ea" class="outline-3">
<h3 id="org6fff5ea">Header</h3>
<div class="outline-text-3" id="text-org6fff5ea">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;;; </span><span class="org-comment">.emacs-minimal --- Minimal configuration file for Emacs</span>

<span class="org-comment-delimiter">;;; </span><span class="org-comment">Commentary:</span>

<span class="org-comment-delimiter">;;; </span><span class="org-comment">Code:</span>

(message <span class="org-string">"Loading Minimal Emacs..."</span>)

(<span class="org-keyword">defconst</span> <span class="org-variable-name">em/emacs-load-time-start</span> (float-time))
</pre>
</div>
</div>
</div>

<div id="outline-container-org6b5cad5" class="outline-3">
<h3 id="org6b5cad5">Constant part</h3>
<div class="outline-text-3" id="text-org6b5cad5">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;;</span><span class="org-comment">* --[ Constant part ]-------------------------------------------------------</span>

<span class="org-comment-delimiter">;; </span><span class="org-comment">Activate debugging.</span>
(<span class="org-keyword">setq</span> debug-on-error t)
(<span class="org-keyword">setq</span> debug-on-quit t)

<span class="org-comment-delimiter">;; </span><span class="org-comment">Default values for frame creation.</span>
(<span class="org-keyword">setq</span> default-frame-alist '((tool-bar-lines . 0)))

<span class="org-comment-delimiter">;; </span><span class="org-comment">Title bar display of visible frames.</span>
(<span class="org-keyword">setq</span> frame-title-format
      (format <span class="org-string">"Minimal %s Emacs %s%s of %s - PID: %d"</span>
              (capitalize (symbol-name system-type))
              emacs-version
              (<span class="org-keyword">if</span> (<span class="org-keyword">and</span> (boundp 'emacs-repository-version)
                       emacs-repository-version)
                  (concat <span class="org-string">" (r"</span>
                          (replace-regexp-in-string <span class="org-string">" .*"</span> <span class="org-string">""</span>
                                                    emacs-repository-version)
                          <span class="org-string">")"</span>)
                <span class="org-string">""</span>)
              (format-time-string <span class="org-string">"%Y-%m-%d"</span> emacs-build-time)
              (emacs-pid)))

<span class="org-comment-delimiter">;; </span><span class="org-comment">Allow input of accented characters (for terminals that use 8-bit charsets).</span>
(set-input-mode nil nil 1)

<span class="org-comment-delimiter">;; </span><span class="org-comment">Enable visualization of matching parens.</span>
(<span class="org-keyword">require</span> '<span class="org-constant">paren</span>)
(show-paren-mode 1)
(<span class="org-keyword">setq</span> show-paren-style 'mixed)
(<span class="org-keyword">setq</span> show-paren-ring-bell-on-mismatch t)

<span class="org-comment-delimiter">;; </span><span class="org-comment">No limit when printing values.</span>
(<span class="org-keyword">setq</span> eval-expression-print-length nil)
(<span class="org-keyword">setq</span> eval-expression-print-level nil)

<span class="org-comment-delimiter">;; </span><span class="org-comment">Don't display the "Welcome to GNU Emacs" buffer on startup.</span>
(<span class="org-keyword">setq</span> inhibit-startup-screen t)

<span class="org-comment-delimiter">;; </span><span class="org-comment">Initial message displayed in *scratch* buffer at startup.</span>
(<span class="org-keyword">setq</span> initial-scratch-message
      <span class="org-string">";;----------------------------------------------------------------------</span>
<span class="org-string">;; This is Emacs running with a minimal configuration file.</span>
<span class="org-string">;;----------------------------------------------------------------------</span>

<span class="org-string">"</span>)
</pre>
</div>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span class="org-keyword">defun</span> <span class="org-function-name">try-require</span> (feature)
  <span class="org-doc">"Attempt to load a FEATURE (or library).</span>
<span class="org-doc">    Return true if the library given as argument is successfully loaded.  If</span>
<span class="org-doc">    not, just print a message."</span>
  (<span class="org-keyword">condition-case</span> err
      (<span class="org-keyword">progn</span>
        (<span class="org-keyword">if</span> (stringp feature)
            (load-library feature)
          (<span class="org-keyword">require</span> <span class="org-constant">feature</span>))
        t)                              <span class="org-comment-delimiter">; </span><span class="org-comment">Necessary for correct behavior in</span>
                                        <span class="org-comment-delimiter">; </span><span class="org-comment">conditional expressions.</span>
    (file-error
     (message <span class="org-string">"Requiring `</span><span class="org-constant"><span class="org-string">%s</span></span><span class="org-string">'... missing"</span> feature)
     nil)))
</pre>
</div>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;; </span><span class="org-comment">Org-mode (reverse order, so that the Org lisp directory will be found</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">before the Org contrib lisp directory).</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">(add-to-list 'load-path "~/Public/Repositories/org-mode/testing")</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">(add-to-list 'load-path "~/Public/Repositories/org-mode/contrib/lisp") ; htmlize</span>
(add-to-list 'load-path <span class="org-string">"~/Public/Repositories/org-mode/lisp"</span>)
                                        <span class="org-comment-delimiter">; </span><span class="org-comment">Modify the paths to suit your</span>
                                        <span class="org-comment-delimiter">; </span><span class="org-comment">environment!</span>

<span class="org-comment-delimiter">;; </span><span class="org-comment">Getting started.</span>
(add-to-list 'auto-mode-alist '(<span class="org-string">"\\.</span><span class="org-regexp-grouping-backslash"><span class="org-string">\\</span></span><span class="org-regexp-grouping-construct"><span class="org-string">(</span></span><span class="org-string">org</span><span class="org-regexp-grouping-backslash"><span class="org-string">\\</span></span><span class="org-regexp-grouping-construct"><span class="org-string">|</span></span><span class="org-string">org_archive</span><span class="org-regexp-grouping-backslash"><span class="org-string">\\</span></span><span class="org-regexp-grouping-construct"><span class="org-string">|</span></span><span class="org-string">txt</span><span class="org-regexp-grouping-backslash"><span class="org-string">\\</span></span><span class="org-regexp-grouping-construct"><span class="org-string">)</span></span><span class="org-string">\\'"</span> . org-mode))
(<span class="org-keyword">when</span> (locate-library <span class="org-string">"org-loaddefs"</span>)
  (<span class="org-keyword">require</span> '<span class="org-constant">org-loaddefs</span>))

(global-set-key (kbd <span class="org-string">"C-c l"</span>) 'org-store-link)
(global-set-key (kbd <span class="org-string">"C-c a"</span>) 'org-agenda)
(global-set-key (kbd <span class="org-string">"C-c c"</span>) 'org-capture)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgafd5495" class="outline-3">
<h3 id="orgafd5495">Variable part</h3>
<div class="outline-text-3" id="text-orgafd5495">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;;</span><span class="org-comment">* --[ Variable part Under Test ]--------------------------------------------</span>
</pre>
</div>
</div>

<div id="outline-container-org4da89dc" class="outline-4">
<h4 id="org4da89dc">Sandbox</h4>
<div class="outline-text-4" id="text-org4da89dc">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;; </span><span class="org-comment">Place your test code here.</span>

(<span class="org-keyword">setq</span> ispell-program-name
      (<span class="org-keyword">cond</span> ((eq system-type 'cygwin)
             <span class="org-string">"/cygdrive/c/Program Files (x86)/Aspell/bin/aspell.exe"</span>)
            ((eq system-type 'windows-nt)
             <span class="org-string">"c:/Program Files (x86)/Aspell/bin/aspell.exe"</span>)))

<span class="org-comment-delimiter">;; </span><span class="org-comment">Enable on-the-fly spell checking.</span>
(add-hook 'org-mode-hook 'flyspell-mode)

(<span class="org-keyword">with-eval-after-load</span> <span class="org-string">"helm-autoloads"</span>
  (global-set-key (kbd <span class="org-string">"M-y"</span>) 'helm-show-kill-ring))
</pre>
</div>
</div>
</div>

<div id="outline-container-org67cfc12" class="outline-4">
<h4 id="org67cfc12">Test if function is defined</h4>
<div class="outline-text-4" id="text-org67cfc12">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(message <span class="org-string">"defined? %S"</span> (functionp (<span class="org-keyword">quote</span> org-babel-do-load-languages)))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgcfdbc6c" class="outline-4">
<h4 id="orgcfdbc6c">Eval-after-load eval&rsquo;ed twice</h4>
<div class="outline-text-4" id="text-orgcfdbc6c">
</div><div id="outline-container-orgf379275" class="outline-5">
<h5 id="orgf379275">Minimal display</h5>
<div class="outline-text-5" id="text-orgf379275">
<p>
You can see the problem by running the following code:
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span class="org-keyword">with-eval-after-load</span> <span class="org-string">"org"</span>
  (message <span class="org-string">"LOADED org.el"</span>)
  (sit-for 3)
  (message <span class="org-string">""</span>))
</pre>
</div>
</div>
</div>

<div id="outline-container-org4c7c585" class="outline-5">
<h5 id="org4c7c585">Backtraces</h5>
<div class="outline-text-5" id="text-org4c7c585">
<p>
You can <b>get backtraces</b> at each stopping point by Edebugging <code>foobar</code> and
<code>C-x C-f foo.org</code>:
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span class="org-keyword">defun</span> <span class="org-function-name">foobar</span> ()
  (message <span class="org-string">"LOADED org.el"</span>)
  (sit-for 3)
  (message <span class="org-string">""</span>))

(<span class="org-keyword">setq</span> org-load-hook (<span class="org-keyword">function</span> foobar))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgb840427" class="outline-4">
<h4 id="orgb840427">Test export to HTML</h4>
<div class="outline-text-4" id="text-orgb840427">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span class="org-keyword">let</span> ((org-confirm-babel-evaluate nil)) <span class="org-comment-delimiter">; </span><span class="org-comment">Preference over the explicit setq.</span>
  (find-file <span class="org-string">"file-to-export.org"</span>)
  (org-export-as-html 3))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgfb046f4" class="outline-4">
<h4 id="orgfb046f4">Org-test</h4>
<div class="outline-text-4" id="text-orgfb046f4">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;; </span><span class="org-comment">Change the pathname appropriately!</span>
(add-to-list 'load-path (expand-file-name <span class="org-string">"~/Public/Repositories/org-mode/testing"</span>))
(load-library <span class="org-string">"org-test"</span>)
</pre>
</div>
</div>

<div id="outline-container-org8559ee9" class="outline-5">
<h5 id="org8559ee9">Create a new test case</h5>
<div class="outline-text-5" id="text-org8559ee9">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span class="org-keyword">ert-deftest</span> <span class="org-function-name">test-org/end-of-line</span> ()
  <span class="org-doc">"Test `</span><span class="org-constant"><span class="org-doc">org-end-of-line</span></span><span class="org-doc">' specifications."</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">At an headline without special movement.</span>
  (should
   (org-test-with-temp-text <span class="org-string">"* Headline2 :tag:\n"</span>
     (<span class="org-keyword">let</span> ((org-special-ctrl-a/e nil))
       (<span class="org-keyword">and</span> (<span class="org-keyword">progn</span>
              (message <span class="org-string">"FOO"</span>)
              (org-end-of-line)
              (message (format <span class="org-string">"%d"</span> (point)))
              (eolp))
            (<span class="org-keyword">progn</span>
              (org-end-of-line)
              (eolp)))))))

(ert 'test-org/end-of-line)
</pre>
</div>
</div>
</div>

<div id="outline-container-org5e3cf01" class="outline-5">
<h5 id="org5e3cf01">Run an existing test</h5>
<div class="outline-text-5" id="text-org5e3cf01">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;; </span><span class="org-comment">Change the pathname appropriately!</span>
(add-to-list 'load-path (expand-file-name <span class="org-string">"~/Public/Repositories/org-mode/testing/lisp"</span>))
(load-library <span class="org-string">"test-org"</span>)
(ert-run-tests-batch-and-exit 'test-org/end-of-line)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgc015cbd" class="outline-4">
<h4 id="orgc015cbd">ELP</h4>
<div class="outline-text-4" id="text-orgc015cbd">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;; </span><span class="org-comment">(setq org-babel-load-languages '((emacs-lisp . t) (latex . t)))</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">(setq org-confirm-babel-evaluate nil)</span>

(<span class="org-keyword">require</span> '<span class="org-constant">org</span>)
(<span class="org-keyword">require</span> '<span class="org-constant">org-agenda</span>)
(<span class="org-keyword">require</span> '<span class="org-constant">outline</span>)
(<span class="org-keyword">require</span> '<span class="org-constant">font-lock</span>)
(<span class="org-keyword">require</span> '<span class="org-constant">flyspell</span>)
(<span class="org-keyword">require</span> '<span class="org-constant">ispell</span>)
(<span class="org-keyword">require</span> '<span class="org-constant">calendar</span>)
(<span class="org-keyword">require</span> '<span class="org-constant">cal-iso</span>)
(<span class="org-keyword">require</span> '<span class="org-constant">diary-lib</span>)

<span class="org-comment-delimiter">;; </span><span class="org-comment">Profile some times... CAUTION: require the packages first (to get results)!</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">(elp-instrument-list '(org-agenda-next-line next-line line-move))</span>
(<span class="org-keyword">when</span> (<span class="org-keyword">require</span> '<span class="org-constant">elp</span>)
  <span class="org-comment-delimiter">;; </span><span class="org-comment">The most important ones.</span>
  (elp-instrument-package <span class="org-string">"org"</span>)
  (elp-instrument-package <span class="org-string">"org-agenda"</span>)
  (elp-instrument-package <span class="org-string">"outline"</span>)
  (elp-instrument-package <span class="org-string">"font-lock"</span>)
  (elp-instrument-package <span class="org-string">"flyspell"</span>)
  (elp-instrument-package <span class="org-string">"ispell"</span>)
  (elp-instrument-package <span class="org-string">"emacs-leuven"</span>)
  (elp-instrument-package <span class="org-string">"calendar"</span>)
  (elp-instrument-package <span class="org-string">"cal-iso"</span>)
  (elp-instrument-package <span class="org-string">"diary-lib"</span>)

  (global-set-key (kbd <span class="org-string">"C-c e"</span>) 'elp-results))

<span class="org-comment-delimiter">;; </span><span class="org-comment">Improve readability of profile results, give milliseconds.</span>
(<span class="org-keyword">defun</span> <span class="org-function-name">elp-pack-number</span> (number width)
  (format (concat <span class="org-string">"%"</span> (number-to-string (- width 3)) <span class="org-string">".2f"</span>)
          (* 100 (string-to-number number))))

(<span class="org-keyword">setq</span> org-agenda-files '(<span class="org-string">"~/org/tests/org-test.txt"</span>))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org3199ce8" class="outline-3">
<h3 id="org3199ce8">Footer</h3>
<div class="outline-text-3" id="text-org3199ce8">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(message <span class="org-string">"Loading Minimal Emacs... Done (in %.2f s)"</span>
         (- (float-time) em/emacs-load-time-start))

(<span class="org-keyword">provide</span> '<span class="org-constant">.emacs-minimal</span>)

<span class="org-comment-delimiter">;;; </span><span class="org-comment">.emacs-minimal.el ends here</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org163dba" class="outline-2">
<h2 id="org163dba">One-liners</h2>
<div class="outline-text-2" id="text-org163dba">
</div><div id="outline-container-orgfcc6593" class="outline-3">
<h3 id="orgfcc6593">ELP</h3>
<div class="outline-text-3" id="text-orgfcc6593">
<div class="org-src-container">

<pre class="src src-shell">emacs -Q --batch -L ~/Public/Repositories/org-mode/lisp <span class="org-sh-escaped-newline">\</span>
    --eval <span class="org-string">'(elp-instrument-package "org")'</span> 400.org --eval <span class="org-string">'(elp-results)'</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org398a786" class="outline-2">
<h2 id="org398a786">Script</h2>
<div class="outline-text-2" id="text-org398a786">
</div><div id="outline-container-org2254fca" class="outline-3">
<h3 id="org2254fca">From the man page</h3>
<div class="outline-text-3" id="text-org2254fca">
<dl class="org-dl">
<dt><code>-q</code>, <code>--no-init-file</code></dt><dd>Do not load an init file.</dd>

<dt><code>--no-site-file</code></dt><dd>Do not load the site-wide startup file.</dd>

<dt><code>-Q</code>, <code>--quick</code></dt><dd><p>
     Similar to <code>-q --no-site-file --no-splash</code>.
</p>

<p>
<b>Ignore any configuration</b> ensuring a vanilla Emacs instance is used.
</p></dd>

<dt><code>--batch</code></dt><dd><p>
     Run Emacs in &ldquo;batch&rdquo; mode with <b>no GUI</b> and <b>termination after execution</b>.
</p>

<p>
The editor will send messages to stderr.
</p>

<p>
You must use <code>-l</code> and <code>-f</code> options to specify files to execute and functions
to call.
</p></dd>
</dl>
</div>
</div>

<div id="outline-container-orgbc5c4c3" class="outline-3">
<h3 id="orgbc5c4c3">Ideal</h3>
<div class="outline-text-3" id="text-orgbc5c4c3">
<p>
<b>Some code must be used in the <code>.emacs</code> file (or libraries loaded FROM it).</b>
</p>

<p>
For example:
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">  <span class="org-comment-delimiter">;; </span><span class="org-comment">Major mode command symbol to use for the initial `</span><span class="org-constant"><span class="org-comment">*scratch*</span></span><span class="org-comment">' buffer.</span>
  (<span class="org-keyword">setq</span> initial-major-mode 'fundamental-mode)
</pre>
</div>

<p>
Otherwise, <code>*scratch*</code> will already have been created, in the default major
mode.
</p>

<p>
So, ideally, when testing a minimal Emacs configuration file, we should
replace the <code>.emacs</code> file.
</p>

<p>
What we <b>could</b> do, is set <code>HOME</code> to a different value just for Emacs, but that&rsquo;s
not recommended, because it could mess up external programs that Emacs calls.
And <span class="underline">because</span> Emacs relies so much on external programs, notably the shell,
changing <code>HOME</code> for Emacs is a very bad idea. WE DON&rsquo;T DO THAT!!
</p>
</div>
</div>

<div id="outline-container-org358024b" class="outline-3">
<h3 id="org358024b">emacs-helm.sh (from Thierry Volpiatto)</h3>
<div class="outline-text-3" id="text-org358024b">
<p class="verse">
&gt; I was too lazy to test with emacs -Q before.<br  />
<br  />
<code>emacs-helm.sh</code> is for that, I am too lazy too to use emacs -Q ;-)<br  />
</p>

<p>
If <code>emacs</code> is pointing to an Emacs executable which is not fully working, you can
use the <code>-P</code> option of <code>emacs-helm.sh</code> to use another Emacs executable file.
</p>
</div>
</div>

<div id="outline-container-org875c651" class="outline-3">
<h3 id="org875c651">Code</h3>
<div class="outline-text-3" id="text-org875c651">
<p>
<b>Call this script emacs-q?</b>
</p>

<div class="org-src-container">

<pre class="src src-shell"><span class="org-variable-name">TESTEL</span>=
<span class="org-variable-name">TESTFILE</span>=~/test.el
<span class="org-keyword">if </span><span class="org-builtin">test</span> -e $<span class="org-variable-name">TESTFILE</span> <span class="org-comment-delimiter"># </span><span class="org-comment">file exists</span>
<span class="org-keyword">then</span>
    <span class="org-variable-name">TESTEL</span>=<span class="org-string">"-l $TESTFILE"</span>
<span class="org-keyword">fi</span>

<span class="org-variable-name">EMACS</span>=<span class="org-string">"emacs"</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">No init file.</span>
<span class="org-variable-name">cmd</span>=<span class="org-string">"$EMACS -q -l ${workingDir}.emacs-minimal.el $TESTEL"</span>

<span class="org-builtin">echo</span> <span class="org-string">"Launching '$cmd'..."</span>
<span class="org-builtin">eval</span> <span class="org-string">"$cmd"</span>

<span class="org-builtin">echo</span> <span class="org-string">"Exit status: $?"</span>
</pre>
</div>

<div class="org-src-container">

<pre class="src src-shell"><span class="org-builtin">alias</span> <span class="org-variable-name">em</span>=emacs-minimal
</pre>
</div>

<p>
Install it, by symlinking the file.
</p>

<div class="org-src-container">

<pre class="src src-shell">ln -f -s $<span class="org-variable-name">workingDir</span>/emacs-minimal ~/bin/emacs-minimal
</pre>
</div>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: Fabrice Niessen</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
